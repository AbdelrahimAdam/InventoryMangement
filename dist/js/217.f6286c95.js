"use strict";(self["webpackChunkmonofia_perfume_inventory"]=self["webpackChunkmonofia_perfume_inventory"]||[]).push([[217],{217:function(e,t,s){s.d(t,{A:function(){return ie}});var r=s(641),l=s(33),a=s(751);const o={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},n={class:"bg-white rounded-2xl shadow-xl w-full max-w-2xl rtl max-h-[90vh] overflow-hidden"},i={class:"sticky top-0 bg-white z-10 px-6 py-4 border-b border-gray-200"},u={class:"flex items-center justify-between"},d={class:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-180px)]"},c=["value"],m={class:"grid grid-cols-3 gap-2"},x=["onClick"],v={class:"flex items-center justify-between mb-3"},b={class:"text-xs text-gray-500"},g={class:"relative mb-4"},y={class:"border border-gray-200 rounded-lg overflow-hidden"},k={class:"max-h-60 overflow-y-auto"},p={class:"col-span-5 p-3"},f={class:"font-medium text-sm text-gray-900"},h={class:"text-xs text-gray-500 mt-1"},L={key:0,class:"ml-2"},w={key:1,class:"text-gray-400"},C={class:"col-span-2 p-3 text-center"},_={class:"text-xs font-mono bg-gray-100 text-gray-700 px-2 py-1 rounded"},I={class:"col-span-2 p-3 text-center"},q={class:"col-span-3 p-3 text-center"},W=["onClick"],j={key:0,class:"p-8 text-center"},E={key:0,class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},B={class:"flex items-center justify-between mb-3"},X={class:"grid grid-cols-2 gap-3"},Q={class:"text-sm font-medium text-blue-900"},M={class:"text-sm font-medium text-blue-900"},K={class:"text-sm font-medium text-blue-900"},S={key:1},O={class:"space-y-4"},V={class:"block text-sm font-medium text-gray-700 mb-2"},H={class:"text-xs font-normal text-gray-500"},z={class:"flex items-center space-x-3 space-x-reverse"},F=["disabled"],R=["max"],T=["disabled"],U={class:"flex items-center justify-between mt-2"},$={class:"text-xs text-gray-500"},A={class:"grid grid-cols-3 gap-2"},D=["onClick"],J={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4"},N={class:"flex items-center"},P={class:"text-sm text-red-600"},G={class:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4"},Y={class:"flex space-x-3 space-x-reverse"},Z=["disabled"],ee={key:0,class:"animate-spin h-4 w-4 ml-2 text-white",fill:"none",viewBox:"0 0 24 24"},te={key:1,class:"h-4 w-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function se(e,t,s,se,re,le){return s.isOpen?((0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",n,[(0,r.Lk)("div",i,[(0,r.Lk)("div",u,[t[13]||(t[13]=(0,r.Lk)("div",null,[(0,r.Lk)("h3",{class:"text-lg font-semibold text-gray-900"},"ØµØ±Ù Ø£ØµÙ†Ø§Ù Ù„Ù„ÙØ±ÙˆØ¹"),(0,r.Lk)("p",{class:"text-sm text-gray-500 mt-1"},"Ø§Ø®ØªØ± Ø§Ù„ØµÙ†Ù Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙˆØ£Ø¯Ø®Ù„ ÙƒÙ…ÙŠØ© Ø§Ù„ØµØ±Ù")],-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...t[12]||(t[12]=[(0,r.Lk)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),(0,r.Lk)("div",d,[(0,r.Lk)("div",null,[t[15]||(t[15]=(0,r.Lk)("h4",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},[(0,r.Lk)("span",{class:"h-6 w-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs ml-2"},"1"),(0,r.eW)(" Ø§Ø®ØªØ± Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ù…ØµØ¯Ø± ")],-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>se.form.sourceWarehouse=e),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onChange:t[2]||(t[2]=(...e)=>se.onWarehouseChange&&se.onWarehouseChange(...e))},[t[14]||(t[14]=(0,r.Lk)("option",{value:""},"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ù…ØµØ¯Ø±",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(se.warehouses,e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name_ar),9,c))),128))],544),[[a.u1,se.form.sourceWarehouse]])]),(0,r.Lk)("div",null,[t[16]||(t[16]=(0,r.Lk)("h4",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},[(0,r.Lk)("span",{class:"h-6 w-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs ml-2"},"2"),(0,r.eW)(" Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ù…Ø³ØªÙ„Ù… ")],-1)),(0,r.Lk)("div",m,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(se.destinations,e=>((0,r.uX)(),(0,r.CE)("button",{key:e.id,onClick:t=>se.form.destinationBranch=e.id,class:(0,l.C4)(["p-3 border rounded-lg text-sm transition-all duration-200",se.form.destinationBranch===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"])},(0,l.v_)(e.name_ar),11,x))),128))])]),(0,r.Lk)("div",null,[(0,r.Lk)("div",v,[t[17]||(t[17]=(0,r.Lk)("h4",{class:"text-sm font-medium text-gray-700 flex items-center"},[(0,r.Lk)("span",{class:"h-6 w-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs ml-2"},"3"),(0,r.eW)(" Ø§Ø®ØªØ± Ø§Ù„ØµÙ†Ù Ø§Ù„Ù…Ø±Ø§Ø¯ ØµØ±ÙÙ‡ ")],-1)),(0,r.Lk)("div",b,(0,l.v_)(se.filteredItems.length)+" ØµÙ†Ù Ù…ØªØ§Ø­ ",1)]),(0,r.Lk)("div",g,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>se.searchTerm=e),type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† ØµÙ†Ù Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„ÙƒÙˆØ¯...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},null,512),[[a.Jo,se.searchTerm]]),t[18]||(t[18]=(0,r.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,r.Lk)("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),(0,r.Lk)("div",y,[t[20]||(t[20]=(0,r.Fv)('<div class="grid grid-cols-12 bg-gray-50 text-xs font-medium text-gray-600 border-b border-gray-200" data-v-770c4848><div class="col-span-5 p-3" data-v-770c4848>Ø§Ù„ØµÙ†Ù</div><div class="col-span-2 p-3 text-center" data-v-770c4848>Ø§Ù„ÙƒÙˆØ¯</div><div class="col-span-2 p-3 text-center" data-v-770c4848>Ø§Ù„Ù…ØªØ§Ø­</div><div class="col-span-3 p-3 text-center" data-v-770c4848>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</div></div>',1)),(0,r.Lk)("div",k,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(se.filteredItems,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,l.C4)(["grid grid-cols-12 border-b border-gray-100 hover:bg-gray-50 transition-colors duration-150",se.selectedItem?.id===e.id?"bg-blue-50 border-blue-200":""])},[(0,r.Lk)("div",p,[(0,r.Lk)("div",f,(0,l.v_)(e.Ø§Ù„Ø§Ø³Ù…||e.name),1),(0,r.Lk)("div",h,[e.Ø§Ù„Ù„ÙˆÙ†||e.color?((0,r.uX)(),(0,r.CE)("span",L,(0,l.v_)(e.Ø§Ù„Ù„ÙˆÙ†||e.color),1)):(0,r.Q3)("",!0),e.Ø§Ù„Ù…ÙˆØ±Ø¯||e.supplier?((0,r.uX)(),(0,r.CE)("span",w,"Ø§Ù„Ù…ÙˆØ±Ø¯: "+(0,l.v_)(e.Ø§Ù„Ù…ÙˆØ±Ø¯||e.supplier),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",C,[(0,r.Lk)("span",_,(0,l.v_)(e.Ø§Ù„ÙƒÙˆØ¯||e.code),1)]),(0,r.Lk)("div",I,[(0,r.Lk)("span",{class:(0,l.C4)(["text-sm font-medium",se.getStockClass(e.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||e.remaining_quantity)])},(0,l.v_)(e.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||e.remaining_quantity),3)]),(0,r.Lk)("div",q,[(0,r.Lk)("button",{onClick:t=>se.selectItem(e),class:(0,l.C4)(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors duration-200",se.selectedItem?.id===e.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},(0,l.v_)(se.selectedItem?.id===e.id?"Ù…Ø­Ø¯Ø¯":"Ø§Ø®ØªØ±"),11,W)])],2))),128)),0===se.filteredItems.length?((0,r.uX)(),(0,r.CE)("div",j,[...t[19]||(t[19]=[(0,r.Lk)("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m8-8V4a1 1 0 00-1-1h-2a1 1 0 00-1 1v1M9 7h6"})],-1),(0,r.Lk)("p",{class:"text-sm text-gray-500 mt-2"},"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«",-1)])])):(0,r.Q3)("",!0)])])]),se.selectedItem?((0,r.uX)(),(0,r.CE)("div",E,[(0,r.Lk)("div",B,[t[21]||(t[21]=(0,r.Lk)("h5",{class:"text-sm font-medium text-blue-800"},"Ø§Ù„ØµÙ†Ù Ø§Ù„Ù…Ø­Ø¯Ø¯",-1)),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>se.clearSelection&&se.clearSelection(...e)),class:"text-xs text-blue-600 hover:text-blue-800"}," Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ ")]),(0,r.Lk)("div",X,[(0,r.Lk)("div",null,[t[22]||(t[22]=(0,r.Lk)("div",{class:"text-xs text-blue-600"},"Ø§Ù„Ø§Ø³Ù…",-1)),(0,r.Lk)("div",Q,(0,l.v_)(se.selectedItem.Ø§Ù„Ø§Ø³Ù…||se.selectedItem.name),1)]),(0,r.Lk)("div",null,[t[23]||(t[23]=(0,r.Lk)("div",{class:"text-xs text-blue-600"},"Ø§Ù„ÙƒÙˆØ¯",-1)),(0,r.Lk)("div",M,(0,l.v_)(se.selectedItem.Ø§Ù„ÙƒÙˆØ¯||se.selectedItem.code),1)]),(0,r.Lk)("div",null,[t[24]||(t[24]=(0,r.Lk)("div",{class:"text-xs text-blue-600"},"Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø­Ø§Ù„ÙŠ",-1)),(0,r.Lk)("div",K,(0,l.v_)(se.getWarehouseName(se.selectedItem.Ø§Ù„Ù…Ø®Ø²Ù†_id||se.selectedItem.warehouse_id)),1)]),(0,r.Lk)("div",null,[t[25]||(t[25]=(0,r.Lk)("div",{class:"text-xs text-blue-600"},"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©",-1)),(0,r.Lk)("div",{class:(0,l.C4)(["text-sm font-medium",se.getStockClass(se.selectedItem.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||se.selectedItem.remaining_quantity)])},(0,l.v_)(se.selectedItem.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||se.selectedItem.remaining_quantity),3)])])])):(0,r.Q3)("",!0),se.selectedItem?((0,r.uX)(),(0,r.CE)("div",S,[t[31]||(t[31]=(0,r.Lk)("h4",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},[(0,r.Lk)("span",{class:"h-6 w-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-xs ml-2"},"4"),(0,r.eW)(" Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµØ±Ù ")],-1)),(0,r.Lk)("div",O,[(0,r.Lk)("div",null,[(0,r.Lk)("label",V,[t[26]||(t[26]=(0,r.eW)(" Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¯ ØµØ±ÙÙ‡Ø§ ",-1)),(0,r.Lk)("span",H," (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: "+(0,l.v_)(se.selectedItem.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||se.selectedItem.remaining_quantity)+") ",1)]),(0,r.Lk)("div",z,[(0,r.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>se.decreaseQuantity&&se.decreaseQuantity(...e)),disabled:se.form.quantity<=1,class:"w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[27]||(t[27]=[(0,r.Lk)("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,F),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>se.form.quantity=e),type:"number",max:se.selectedItem.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||se.selectedItem.remaining_quantity,min:"1",required:"",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg font-medium"},null,8,R),[[a.Jo,se.form.quantity,void 0,{number:!0}]]),(0,r.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>se.increaseQuantity&&se.increaseQuantity(...e)),disabled:se.form.quantity>=(se.selectedItem.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||se.selectedItem.remaining_quantity),class:"w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[28]||(t[28]=[(0,r.Lk)("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,T)]),(0,r.Lk)("div",U,[(0,r.Lk)("span",$," Ø³ÙŠØªØ¨Ù‚Ù‰ Ø¨Ø¹Ø¯ Ø§Ù„ØµØ±Ù: "+(0,l.v_)((se.selectedItem.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||se.selectedItem.remaining_quantity)-se.form.quantity),1),(0,r.Lk)("button",{onClick:t[8]||(t[8]=e=>se.form.quantity=se.selectedItem.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||se.selectedItem.remaining_quantity),class:"text-xs text-blue-600 hover:text-blue-800"}," Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙ„ ")])]),(0,r.Lk)("div",null,[t[29]||(t[29]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„ØµØ±Ù",-1)),(0,r.Lk)("div",A,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(se.priorityOptions,e=>((0,r.uX)(),(0,r.CE)("button",{key:e.value,onClick:t=>se.form.priority=e.value,class:(0,l.C4)(["p-3 border rounded-lg text-sm transition-all duration-200 flex items-center justify-center space-x-2 space-x-reverse",se.form.priority===e.value?e.borderClass+" "+e.bgClass+" "+e.textClass:"border-gray-200 hover:border-gray-300 hover:bg-gray-50 text-gray-700"])},[(0,r.Lk)("span",{class:(0,l.C4)(e.iconClass)},(0,l.v_)(e.icon),3),(0,r.Lk)("span",null,(0,l.v_)(e.label),1)],10,D))),128))])]),(0,r.Lk)("div",null,[t[30]||(t[30]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ù…Ù„Ø§Ø­Ø¸Ø§Øª",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>se.form.notes=e),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Ø£Ø¶Ù Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø­ÙˆÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØµØ±Ù..."},null,512),[[a.Jo,se.form.notes]])])])])):(0,r.Q3)("",!0),se.error?((0,r.uX)(),(0,r.CE)("div",J,[(0,r.Lk)("div",N,[t[32]||(t[32]=(0,r.Lk)("svg",{class:"h-5 w-5 text-red-400 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),(0,r.Lk)("p",P,(0,l.v_)(se.error),1)])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",G,[(0,r.Lk)("div",Y,[(0,r.Lk)("button",{type:"button",onClick:t[10]||(t[10]=t=>e.$emit("close")),class:"flex-1 px-4 py-3 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200"}," Ø¥Ù„ØºØ§Ø¡ "),(0,r.Lk)("button",{type:"submit",onClick:t[11]||(t[11]=(...e)=>se.handleSubmit&&se.handleSubmit(...e)),disabled:se.loading||!se.selectedItem||!se.form.destinationBranch||!se.form.sourceWarehouse||se.form.quantity>(se.selectedItem?.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||se.selectedItem?.remaining_quantity||0),class:"flex-1 px-4 py-3 text-sm font-medium text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center"},[se.loading?((0,r.uX)(),(0,r.CE)("svg",ee,[...t[33]||(t[33]=[(0,r.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),(0,r.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):((0,r.uX)(),(0,r.CE)("svg",te,[...t[34]||(t[34]=[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"},null,-1)])])),(0,r.Lk)("span",null,(0,l.v_)(se.loading?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØµØ±Ù...":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØµØ±Ù"),1)],8,Z)])])])])):(0,r.Q3)("",!0)}var re=s(953),le=s(278),ae={name:"DispatchModal",props:{isOpen:{type:Boolean,default:!1},item:{type:Object,default:null}},emits:["close","success"],setup(e,{emit:t}){const s=(0,le.Pj)(),l=(0,re.KR)(!1),a=(0,re.KR)(""),o=(0,re.KR)(null),n=(0,re.KR)(""),i=(0,re.Kh)({sourceWarehouse:"",destinationBranch:"",quantity:1,notes:"",priority:"normal"}),u=[{id:"Ù…ØµÙ†Ø¹ Ø§Ù„Ø¨Ø±Ø§Ù†",name_ar:"Ù…ØµÙ†Ø¹ Ø§Ù„Ø¨Ø±Ø§Ù†",icon:"ğŸ­"},{id:"Ù…Ø®Ø²Ù† Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡",name_ar:"Ù…Ø®Ø²Ù† Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡",icon:"ğŸª"}],d=[{value:"normal",label:"Ø¹Ø§Ø¯ÙŠØ©",icon:"â±ï¸",bgClass:"bg-blue-50",borderClass:"border-blue-300",textClass:"text-blue-700",iconClass:"text-blue-500"},{value:"high",label:"Ø¹Ø§Ù„ÙŠØ©",icon:"âš ï¸",bgClass:"bg-orange-50",borderClass:"border-orange-300",textClass:"text-orange-700",iconClass:"text-orange-500"},{value:"urgent",label:"Ø¹Ø§Ø¬Ù„Ø©",icon:"ğŸš¨",bgClass:"bg-red-50",borderClass:"border-red-300",textClass:"text-red-700",iconClass:"text-red-500"}],c=(0,r.EW)(()=>s.state.warehouses||[]),m=(0,r.EW)(()=>s.state.inventory||[]),x=(0,r.EW)(()=>i.sourceWarehouse?m.value.filter(e=>(e.Ø§Ù„Ù…Ø®Ø²Ù†_id||e.warehouse_id)===i.sourceWarehouse&&(e.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||e.remaining_quantity)>0):[]),v=(0,r.EW)(()=>{if(!n.value.trim())return x.value;const e=n.value.toLowerCase().trim();return x.value.filter(t=>{const s=(t.Ø§Ù„Ø§Ø³Ù…||t.name||"").toLowerCase(),r=(t.Ø§Ù„ÙƒÙˆØ¯||t.code||"").toLowerCase(),l=(t.Ø§Ù„Ù„ÙˆÙ†||t.color||"").toLowerCase(),a=(t.Ø§Ù„Ù…ÙˆØ±Ø¯||t.supplier||"").toLowerCase();return s.includes(e)||r.includes(e)||l.includes(e)||a.includes(e)})}),b=e=>{const t=c.value.find(t=>t.id===e);return t?t.name_ar:e},g=e=>0===e?"text-red-600":e<10?"text-yellow-600":"text-green-600",y=()=>{Object.assign(i,{sourceWarehouse:"",destinationBranch:"",quantity:1,notes:"",priority:"normal"}),o.value=null,a.value="",n.value=""},k=e=>{o.value?.id===e.id?o.value=null:(o.value=e,i.quantity=1)},p=()=>{o.value=null},f=()=>{o.value=null,n.value=""},h=()=>{const e=o.value?.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||o.value?.remaining_quantity||0;i.quantity<e&&i.quantity++},L=()=>{i.quantity>1&&i.quantity--};(0,r.wB)(()=>e.isOpen,t=>{t&&(y(),e.item&&(k(e.item),i.sourceWarehouse=e.item.Ø§Ù„Ù…Ø®Ø²Ù†_id||e.item.warehouse_id))}),(0,r.wB)(()=>e.item,t=>{t&&e.isOpen&&(k(t),i.sourceWarehouse=t.Ø§Ù„Ù…Ø®Ø²Ù†_id||t.warehouse_id)}),(0,r.wB)(()=>i.quantity,e=>{if(o.value){const t=o.value.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||o.value.remaining_quantity||0;e>t?i.quantity=t:e<1&&(i.quantity=1)}});const w=async()=>{if(!i.sourceWarehouse)return void(a.value="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ù…ØµØ¯Ø±");if(!i.destinationBranch)return void(a.value="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ù…Ø³ØªÙ„Ù…");if(!o.value)return void(a.value="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙ†Ù Ù„Ù„ØµØ±Ù");if(!i.quantity||i.quantity<=0)return void(a.value="ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ…ÙŠØ© ØµØ­ÙŠØ­Ø©");const e=o.value.Ø§Ù„ÙƒÙ…ÙŠÙ‡_Ø§Ù„Ù…ØªØ¨Ù‚ÙŠÙ‡||o.value.remaining_quantity||0;if(i.quantity>e)a.value=`Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (${i.quantity}) ØªØªØ¬Ø§ÙˆØ² Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø© (${e})`;else{l.value=!0,a.value="";try{const e={item_id:o.value.id,from_warehouse:i.sourceWarehouse,to_destination:i.destinationBranch,quantity:i.quantity,cartons:0,single_bottles:i.quantity,notes:i.notes,priority:i.priority};console.log("Dispatching item with data:",e);const r=await s.dispatch("dispatchItem",e);if(!r?.success)throw new Error("ÙØ´Ù„ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØµØ±Ù");console.log("Dispatch completed successfully:",r),y(),t("success",r),setTimeout(()=>{t("close")},500)}catch(r){console.error("Error creating dispatch:",r),a.value=r.message||"ÙØ´Ù„ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØµØ±Ù. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰."}finally{l.value=!1}}};return{form:i,loading:l,error:a,selectedItem:o,searchTerm:n,warehouses:c,destinations:u,priorityOptions:d,availableItems:x,filteredItems:v,selectItem:k,clearSelection:p,onWarehouseChange:f,increaseQuantity:h,decreaseQuantity:L,getWarehouseName:b,getStockClass:g,handleSubmit:w}}},oe=s(262);const ne=(0,oe.A)(ae,[["render",se],["__scopeId","data-v-770c4848"]]);var ie=ne}}]);