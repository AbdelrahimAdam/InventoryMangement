"use strict";(self["webpackChunkmonofia_perfume_inventory"]=self["webpackChunkmonofia_perfume_inventory"]||[]).push([[260],{2260:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ve}});var a=r(641),s=r(33),o=r(3751);const l={class:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-900 dark:to-gray-800"},d={class:"relative z-10"},i={class:"sticky top-0 z-50 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl shadow-lg border-b border-gray-200/50 dark:border-gray-700/50"},n={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},c={class:"flex justify-between items-center h-16"},u={class:"flex items-center space-x-4 space-x-reverse"},g={class:"flex items-center space-x-3 space-x-reverse"},k={class:"hidden md:flex items-center space-x-2 space-x-reverse px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-lg"},p={class:"text-xs text-gray-600 dark:text-gray-300"},x={class:"font-bold text-purple-600 dark:text-purple-400"},v={class:"text-xs text-gray-600 dark:text-gray-300"},h={class:"font-bold text-green-600 dark:text-green-400"},m=["disabled"],y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},b={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},f={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200/50 dark:border-gray-700/50 hover:-translate-y-1"},w={class:"flex items-center justify-between"},L={class:"text-2xl font-bold text-gray-900 dark:text-white mt-2"},C={class:"mt-4"},M={class:"flex items-center text-sm text-green-600 dark:text-green-400"},_={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200/50 dark:border-gray-700/50 hover:-translate-y-1"},U={class:"flex items-center justify-between"},j={class:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2"},S={class:"mt-4"},E={class:"text-sm text-gray-500 dark:text-gray-400"},P={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200/50 dark:border-gray-700/50 hover:-translate-y-1"},A={class:"flex items-center justify-between"},B={class:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2"},X={class:"mt-4"},R={class:"text-sm text-gray-500 dark:text-gray-400"},H={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200/50 dark:border-gray-700/50 hover:-translate-y-1"},N={class:"flex items-center justify-between"},z={class:"text-2xl font-bold text-red-600 dark:text-red-400 mt-2"},K={class:"mt-4"},F={class:"text-sm text-gray-500 dark:text-gray-400"},W={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg mb-6 border border-gray-200/50 dark:border-gray-700/50"},D={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},Q={class:"flex flex-col md:flex-row gap-3 w-full md:w-auto"},V={class:"relative flex-grow"},I=["disabled"],T=["disabled"],$=["disabled"],O=["disabled"],Y={key:0,class:"text-center py-12"},G={key:1,class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden border border-gray-200/50 dark:border-gray-700/50"},J={class:"overflow-x-auto"},q={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Z={class:"divide-y divide-gray-200 dark:divide-gray-700"},ee={class:"px-6 py-4"},te={class:"flex items-center"},re={class:"h-10 w-10 rounded-xl bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/30 dark:to-indigo-900/30 flex items-center justify-center ml-3"},ae={class:"text-sm font-bold text-purple-600 dark:text-purple-400"},se={class:"text-right"},oe={class:"text-sm font-medium text-gray-900 dark:text-white"},le={class:"text-sm text-gray-500 dark:text-gray-400"},de={key:0,class:"text-xs text-gray-400 dark:text-gray-500"},ie={class:"px-6 py-4"},ne={key:0,class:"mt-1"},ce={class:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs"},ue={class:"px-6 py-4"},ge={class:"flex items-center"},ke={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},pe={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},xe={class:"px-6 py-4 text-sm font-medium"},ve={class:"flex items-center justify-end space-x-2 space-x-reverse"},he=["onClick"],me=["onClick","title"],ye={class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},fe={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},we=["onClick"],Le={key:0,class:"text-center py-12"},Ce={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Me={class:"mt-6"},_e={key:1,class:"px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700"},Ue={class:"flex items-center justify-between"},je={class:"text-sm text-gray-700 dark:text-gray-300"},Se={class:"font-bold"},Ee={class:"font-bold"},Pe={class:"flex items-center space-x-2 space-x-reverse"},Ae=["disabled"],Be={class:"text-sm text-gray-700 dark:text-gray-300"},Xe=["disabled"];function Re(e,t,r,Re,He,Ne){const ze=(0,a.g2)("router-link"),Ke=(0,a.g2)("AddUserModal");return(0,a.uX)(),(0,a.CE)("div",l,[t[42]||(t[42]=(0,a.Lk)("div",{class:"fixed inset-0 overflow-hidden pointer-events-none"},[(0,a.Lk)("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-purple-300 dark:bg-purple-900 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),(0,a.Lk)("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-yellow-300 dark:bg-yellow-900 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),(0,a.Lk)("div",{class:"absolute top-1/2 left-1/3 w-80 h-80 bg-pink-300 dark:bg-pink-900 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("header",i,[(0,a.Lk)("div",n,[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.bF)(ze,{to:"/",class:"group flex items-center space-x-3 space-x-reverse hover:opacity-80 transition-all duration-300"},{default:(0,a.k6)(()=>[...t[11]||(t[11]=[(0,a.Lk)("div",{class:"relative"},[(0,a.Lk)("div",{class:"h-10 w-10 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300"},[(0,a.Lk)("span",{class:"text-white font-bold text-sm"},"م")]),(0,a.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl blur opacity-0 group-hover:opacity-30 transition-opacity duration-300"})],-1),(0,a.Lk)("div",null,[(0,a.Lk)("h1",{class:"text-lg font-bold text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300"}," إدارة المستخدمين "),(0,a.Lk)("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"نظام إدارة المخزون المتكامل")],-1)])]),_:1})]),(0,a.Lk)("div",g,[(0,a.Lk)("div",k,[(0,a.Lk)("span",p,[(0,a.Lk)("span",x,(0,s.v_)(Re.userStats.total),1),t[12]||(t[12]=(0,a.eW)(" مستخدم ",-1))]),t[14]||(t[14]=(0,a.Lk)("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-600"},null,-1)),(0,a.Lk)("span",v,[(0,a.Lk)("span",h,(0,s.v_)(Re.userStats.active),1),t[13]||(t[13]=(0,a.eW)(" نشط ",-1))])]),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>Re.openAddUserModal&&Re.openAddUserModal(...e)),class:"group relative inline-flex items-center px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-sm font-semibold rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5",disabled:Re.loading},[...t[15]||(t[15]=[(0,a.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl blur opacity-0 group-hover:opacity-50 transition-opacity duration-300"},null,-1),(0,a.Lk)("svg",{class:"w-4 h-4 ml-2 relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),(0,a.Lk)("span",{class:"relative z-10"},"مستخدم جديد",-1)])],8,m),(0,a.bF)(ze,{to:"/",class:"group inline-flex items-center px-4 py-2.5 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-semibold rounded-xl hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5 border border-gray-200 dark:border-gray-600"},{default:(0,a.k6)(()=>[...t[16]||(t[16]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),(0,a.Lk)("span",{class:"group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300"},"الرئيسية",-1)])]),_:1})])])])]),(0,a.Lk)("main",y,[(0,a.Lk)("div",b,[(0,a.Lk)("div",f,[(0,a.Lk)("div",w,[(0,a.Lk)("div",null,[t[17]||(t[17]=(0,a.Lk)("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"إجمالي المستخدمين",-1)),(0,a.Lk)("p",L,(0,s.v_)(Re.userStats.total),1)]),t[18]||(t[18]=(0,a.Lk)("div",{class:"h-12 w-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center"},[(0,a.Lk)("svg",{class:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))]),(0,a.Lk)("div",C,[(0,a.Lk)("div",M,[t[19]||(t[19]=(0,a.Lk)("svg",{class:"w-4 h-4 ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z","clip-rule":"evenodd"})],-1)),(0,a.Lk)("span",null,"+"+(0,s.v_)(Re.userStats.thisMonth)+" هذا الشهر",1)])])]),(0,a.Lk)("div",_,[(0,a.Lk)("div",U,[(0,a.Lk)("div",null,[t[20]||(t[20]=(0,a.Lk)("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"المستخدمين النشطين",-1)),(0,a.Lk)("p",j,(0,s.v_)(Re.userStats.active),1)]),t[21]||(t[21]=(0,a.Lk)("div",{class:"h-12 w-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center"},[(0,a.Lk)("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),(0,a.Lk)("div",S,[(0,a.Lk)("div",E,(0,s.v_)(Math.round(Re.userStats.active/Re.userStats.total*100)||0)+"% من إجمالي المستخدمين ",1)])]),(0,a.Lk)("div",P,[(0,a.Lk)("div",A,[(0,a.Lk)("div",null,[t[22]||(t[22]=(0,a.Lk)("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"مديري المخازن",-1)),(0,a.Lk)("p",B,(0,s.v_)(Re.userStats.warehouseManagers),1)]),t[23]||(t[23]=(0,a.Lk)("div",{class:"h-12 w-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},[(0,a.Lk)("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))]),(0,a.Lk)("div",X,[(0,a.Lk)("div",R,(0,s.v_)(Math.round(Re.userStats.warehouseManagers/Re.userStats.total*100)||0)+"% من إجمالي المستخدمين ",1)])]),(0,a.Lk)("div",H,[(0,a.Lk)("div",N,[(0,a.Lk)("div",null,[t[24]||(t[24]=(0,a.Lk)("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"المستخدمين المعطلين",-1)),(0,a.Lk)("p",z,(0,s.v_)(Re.userStats.inactive),1)]),t[25]||(t[25]=(0,a.Lk)("div",{class:"h-12 w-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center"},[(0,a.Lk)("svg",{class:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})])],-1))]),(0,a.Lk)("div",K,[(0,a.Lk)("div",F,(0,s.v_)(Math.round(Re.userStats.inactive/Re.userStats.total*100)||0)+"% من إجمالي المستخدمين ",1)])])]),(0,a.Lk)("div",W,[(0,a.Lk)("div",D,[t[31]||(t[31]=(0,a.Lk)("div",null,[(0,a.Lk)("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"قائمة المستخدمين"),(0,a.Lk)("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"إدارة جميع حسابات المستخدمين في النظام")],-1)),(0,a.Lk)("div",Q,[(0,a.Lk)("div",V,[t[26]||(t[26]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,a.Lk)("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>Re.searchTerm=e),onInput:t[2]||(t[2]=(...e)=>Re.handleSearch&&Re.handleSearch(...e)),placeholder:"ابحث عن مستخدم بالاسم أو البريد...",class:"w-full pr-10 pl-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300",disabled:Re.loading},null,40,I),[[o.Jo,Re.searchTerm]])]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>Re.roleFilter=e),onChange:t[4]||(t[4]=(...e)=>Re.loadUsers&&Re.loadUsers(...e)),class:"px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300",disabled:Re.loading},[...t[27]||(t[27]=[(0,a.Lk)("option",{value:""},"جميع الأدوار",-1),(0,a.Lk)("option",{value:"superadmin"},"المشرف العام",-1),(0,a.Lk)("option",{value:"warehouse_manager"},"مدير المخازن",-1),(0,a.Lk)("option",{value:"company_manager"},"مدير الشركة",-1)])],40,T),[[o.u1,Re.roleFilter]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>Re.statusFilter=e),onChange:t[6]||(t[6]=(...e)=>Re.loadUsers&&Re.loadUsers(...e)),class:"px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300",disabled:Re.loading},[...t[28]||(t[28]=[(0,a.Lk)("option",{value:""},"جميع الحالات",-1),(0,a.Lk)("option",{value:"active"},"نشط فقط",-1),(0,a.Lk)("option",{value:"inactive"},"معطل فقط",-1)])],40,$),[[o.u1,Re.statusFilter]]),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>Re.loadUsers&&Re.loadUsers(...e)),disabled:Re.loading,class:"px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-300 flex items-center justify-center gap-2"},[((0,a.uX)(),(0,a.CE)("svg",{class:(0,s.C4)(["w-5 h-5",{"animate-spin":Re.loading}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[29]||(t[29]=[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),t[30]||(t[30]=(0,a.eW)(" تحديث ",-1))],8,O)])])]),Re.loading&&0===Re.users.length?((0,a.uX)(),(0,a.CE)("div",Y,[...t[32]||(t[32]=[(0,a.Lk)("div",{class:"inline-flex flex-col items-center"},[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),(0,a.Lk)("p",{class:"text-gray-600 dark:text-gray-400"},"جاري تحميل بيانات المستخدمين...")],-1)])])):((0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("div",J,[(0,a.Lk)("table",q,[t[35]||(t[35]=(0,a.Lk)("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{scope:"col",class:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," المستخدم "),(0,a.Lk)("th",{scope:"col",class:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," الدور "),(0,a.Lk)("th",{scope:"col",class:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," الحالة "),(0,a.Lk)("th",{scope:"col",class:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," تاريخ الإنشاء "),(0,a.Lk)("th",{scope:"col",class:"px-6 py-4 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," الإجراءات ")])],-1)),(0,a.Lk)("tbody",Z,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Re.filteredUsers,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200"},[(0,a.Lk)("td",ee,[(0,a.Lk)("div",te,[(0,a.Lk)("div",re,[(0,a.Lk)("span",ae,(0,s.v_)(Re.getUserInitials(e.name)),1)]),(0,a.Lk)("div",se,[(0,a.Lk)("div",oe,(0,s.v_)(e.name),1),(0,a.Lk)("div",le,(0,s.v_)(e.email),1),e.phone?((0,a.uX)(),(0,a.CE)("div",de,(0,s.v_)(e.phone),1)):(0,a.Q3)("",!0)])])]),(0,a.Lk)("td",ie,[(0,a.Lk)("span",{class:(0,s.C4)(Re.getRoleBadgeClass(e.role))},(0,s.v_)(Re.getRoleName(e.role)),3),"warehouse_manager"===e.role&&e.allowed_warehouses?((0,a.uX)(),(0,a.CE)("div",ne,[(0,a.Lk)("div",ce,(0,s.v_)(e.allowed_warehouses.length)+" مخزن ",1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",ue,[(0,a.Lk)("div",ge,[(0,a.Lk)("span",{class:(0,s.C4)(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",e.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"])},[(0,a.Lk)("span",{class:(0,s.C4)(["w-2 h-2 rounded-full mr-1",e.is_active?"bg-green-500":"bg-red-500"])},null,2),(0,a.eW)(" "+(0,s.v_)(e.is_active?"نشط":"غير نشط"),1)],2)]),e.last_login?((0,a.uX)(),(0,a.CE)("div",ke," آخر دخول: "+(0,s.v_)(Re.formatDate(e.last_login)),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("td",pe,(0,s.v_)(Re.formatDate(e.created_at)),1),(0,a.Lk)("td",xe,[(0,a.Lk)("div",ve,[(0,a.Lk)("button",{onClick:t=>Re.editUser(e),class:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200 p-1 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg",title:"تعديل"},[...t[33]||(t[33]=[(0,a.Lk)("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,he),(0,a.Lk)("button",{onClick:t=>Re.toggleUserStatus(e),title:e.is_active?"تعطيل المستخدم":"تفعيل المستخدم",class:(0,s.C4)(["p-1 rounded-lg transition-colors duration-200",e.is_active?"text-yellow-600 dark:text-yellow-400 hover:text-yellow-900 dark:hover:text-yellow-300 hover:bg-yellow-50 dark:hover:bg-yellow-900/20":"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20"])},[((0,a.uX)(),(0,a.CE)("svg",ye,[e.is_active?((0,a.uX)(),(0,a.CE)("path",be)):((0,a.uX)(),(0,a.CE)("path",fe))]))],10,me),"superadmin"!==e.role?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>Re.deleteUser(e),class:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",title:"حذف"},[...t[34]||(t[34]=[(0,a.Lk)("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,we)):(0,a.Q3)("",!0)])])]))),128))])])]),Re.loading||0!==Re.filteredUsers.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",Le,[t[37]||(t[37]=(0,a.Lk)("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t[38]||(t[38]=(0,a.Lk)("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"لا توجد نتائج",-1)),(0,a.Lk)("p",Ce,(0,s.v_)(Re.searchTerm?"لم يتم العثور على مستخدمين يطابقون بحثك.":"لا توجد مستخدمين في النظام حتى الآن."),1),(0,a.Lk)("div",Me,[(0,a.Lk)("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>Re.openAddUserModal&&Re.openAddUserModal(...e)),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-900"},[...t[36]||(t[36]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),(0,a.eW)(" إضافة مستخدم جديد ",-1)])])])])),Re.filteredUsers.length>0?((0,a.uX)(),(0,a.CE)("div",_e,[(0,a.Lk)("div",Ue,[(0,a.Lk)("div",je,[t[39]||(t[39]=(0,a.eW)(" عرض ",-1)),(0,a.Lk)("span",Se,(0,s.v_)(Re.filteredUsers.length),1),t[40]||(t[40]=(0,a.eW)(" من ",-1)),(0,a.Lk)("span",Ee,(0,s.v_)(Re.users.length),1),t[41]||(t[41]=(0,a.eW)(" مستخدم ",-1))]),(0,a.Lk)("div",Pe,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>Re.prevPage&&Re.prevPage(...e)),disabled:1===Re.currentPage,class:(0,s.C4)(["px-3 py-1 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",1===Re.currentPage?"text-gray-400 dark:text-gray-600":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"])}," السابق ",10,Ae),(0,a.Lk)("span",Be," صفحة "+(0,s.v_)(Re.currentPage)+" من "+(0,s.v_)(Re.totalPages),1),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>Re.nextPage&&Re.nextPage(...e)),disabled:Re.currentPage===Re.totalPages,class:(0,s.C4)(["px-3 py-1 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",Re.currentPage===Re.totalPages?"text-gray-400 dark:text-gray-600":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"])}," التالي ",10,Xe)])])])):(0,a.Q3)("",!0)]))])]),Re.showUserModal?((0,a.uX)(),(0,a.Wv)(Ke,{key:0,isOpen:Re.showUserModal,user:Re.selectedUser,onClose:Re.closeUserModal,onSave:Re.handleUserSave},null,8,["isOpen","user","onClose","onSave"])):(0,a.Q3)("",!0)])}var He=r(953),Ne=r(834),ze=r(5499),Ke=r(2543),Fe=r(4013),We={name:"UserManagementPage",components:{AddUserModal:Fe.A},setup(){const e=(0,Ne.Pj)(),t=(0,ze.rd)(),r=(0,He.KR)(!0),s=(0,He.KR)([]),o=(0,He.KR)(""),l=(0,He.KR)(""),d=(0,He.KR)(""),i=(0,He.KR)(1),n=(0,He.KR)(10),c=(0,He.KR)(1),u=(0,He.KR)(!1),g=(0,He.KR)(null),k=(0,He.KR)({total:0,active:0,inactive:0,warehouseManagers:0,companyManagers:0,thisMonth:0}),p=(0,a.EW)(()=>e.getters.canManageUsers),x=async()=>{if(!p.value)return e.dispatch("showNotification",{type:"error",message:"ليس لديك صلاحية لإدارة المستخدمين"}),void t.push("/");r.value=!0;try{const t=await e.dispatch("loadAllUsers");t&&(s.value=t,v())}catch(a){console.error("Error loading users:",a),e.dispatch("showNotification",{type:"error",message:a.message||"حدث خطأ في تحميل المستخدمين"})}finally{r.value=!1}},v=()=>{const e={total:s.value.length,active:0,inactive:0,warehouseManagers:0,companyManagers:0,thisMonth:0},t=(new Date).getMonth(),r=(new Date).getFullYear();s.value.forEach(a=>{if(!1!==a.is_active?e.active++:e.inactive++,"warehouse_manager"===a.role?e.warehouseManagers++:"company_manager"===a.role&&e.companyManagers++,a.created_at){const s=new Date(a.created_at);s.getMonth()===t&&s.getFullYear()===r&&e.thisMonth++}}),k.value=e},h=(0,a.EW)(()=>{let e=[...s.value];if(l.value&&(e=e.filter(e=>e.role===l.value)),"active"===d.value?e=e.filter(e=>!1!==e.is_active):"inactive"===d.value&&(e=e.filter(e=>!1===e.is_active)),o.value.trim()){const t=o.value.toLowerCase().trim();e=e.filter(e=>(e.name||"").toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t)||(e.phone||"").toLowerCase().includes(t))}const t=(i.value-1)*n.value,r=t+n.value;return c.value=Math.ceil(e.length/n.value),e.slice(t,r)}),m=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"??",y=e=>{const t={superadmin:"المشرف العام",warehouse_manager:"مدير المخازن",company_manager:"مدير الشركة"};return t[e]||e},b=e=>{const t={superadmin:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",warehouse_manager:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",company_manager:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"};return t[e]||"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"},f=e=>{if(!e)return"غير محدد";const t=new Date(e);return t.toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"})},w=()=>{p.value?(g.value=null,u.value=!0):e.dispatch("showNotification",{type:"error",message:"ليس لديك صلاحية لإضافة مستخدمين"})},L=t=>{p.value?(g.value={...t},u.value=!0):e.dispatch("showNotification",{type:"error",message:"ليس لديك صلاحية لتعديل المستخدمين"})},C=()=>{u.value=!1,g.value=null},M=async()=>{await x(),C()},_=async t=>{if(!p.value)return void e.dispatch("showNotification",{type:"error",message:"ليس لديك صلاحية لتغيير حالة المستخدمين"});if("superadmin"===t.role&&t.id===e.state.user?.uid)return void e.dispatch("showNotification",{type:"error",message:"لا يمكن تعطيل حساب المشرف العام الحالي"});const r=!t.is_active,a=r?`هل أنت متأكد من تفعيل المستخدم "${t.name}"؟`:`هل أنت متأكد من تعطيل المستخدم "${t.name}"؟`;if(confirm(a))try{const a=await e.dispatch("updateUserStatus",{userId:t.id,isActive:r});a.success&&await x()}catch(s){console.error("Error toggling user status:",s),e.dispatch("showNotification",{type:"error",message:s.message||"حدث خطأ في تغيير حالة المستخدم"})}},U=async t=>{if(p.value)if("superadmin"!==t.role)if(t.id!==e.state.user?.uid){if(confirm(`هل أنت متأكد من حذف المستخدم "${t.name}"؟ هذا الإجراء لا يمكن التراجع عنه.`))try{const r=await e.dispatch("deleteUser",t.id);r.success&&await x()}catch(r){console.error("Error deleting user:",r),e.dispatch("showNotification",{type:"error",message:r.message||"حدث خطأ في حذف المستخدم"})}}else e.dispatch("showNotification",{type:"error",message:"لا يمكن حذف حسابك الشخصي"});else e.dispatch("showNotification",{type:"error",message:"لا يمكن حذف مشرف عام"});else e.dispatch("showNotification",{type:"error",message:"ليس لديك صلاحية لحذف المستخدمين"})},j=()=>{i.value<c.value&&i.value++},S=()=>{i.value>1&&i.value--},E=(0,Ke.debounce)(()=>{i.value=1},300);return(0,a.sV)(async()=>{if(!p.value)return e.dispatch("showNotification",{type:"error",message:"ليس لديك صلاحية للوصول إلى هذه الصفحة"}),void t.push("/");await x()}),{loading:r,users:s,searchTerm:o,roleFilter:l,statusFilter:d,currentPage:i,totalPages:c,showUserModal:u,selectedUser:g,userStats:k,filteredUsers:h,canManageUsers:p,loadUsers:x,getUserInitials:m,getRoleName:y,getRoleBadgeClass:b,formatDate:f,openAddUserModal:w,editUser:L,closeUserModal:C,handleUserSave:M,toggleUserStatus:_,deleteUser:U,nextPage:j,prevPage:S,handleSearch:E}}},De=r(6262);const Qe=(0,De.A)(We,[["render",Re],["__scopeId","data-v-7fc210db"]]);var Ve=Qe}}]);