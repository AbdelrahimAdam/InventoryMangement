"use strict";(self["webpackChunkmonofia_perfume_inventory"]=self["webpackChunkmonofia_perfume_inventory"]||[]).push([[287],{2287:function(e,t,r){r.r(t),r.d(t,{default:function(){return ce}});var a=r(641),s=r(33),l=r(3751);const o={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},d={class:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},n={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},i={class:"flex justify-between items-center h-16"},g={class:"flex items-center space-x-4 space-x-reverse"},u={class:"flex items-center space-x-3 space-x-reverse"},c={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},x={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},k={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},p={class:"flex items-center"},y={class:"text-2xl font-bold text-gray-900 dark:text-white"},v={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},b={class:"flex items-center"},m={class:"text-2xl font-bold text-gray-900 dark:text-white"},h={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},f={class:"flex items-center"},w={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},L={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},C={class:"flex items-center"},T={class:"text-2xl font-bold text-gray-900 dark:text-white"},_={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8"},W={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},j={class:"flex flex-wrap gap-4"},E={class:"relative"},M={class:"relative"},P=["value"],D={class:"flex gap-3"},V={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},B={class:"overflow-x-auto"},F={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},X={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800"},K={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},H={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},R={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},I={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},S={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},z={class:"px-6 py-4 whitespace-nowrap"},A={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Q=["onClick"],N=["onClick"],U=["onClick"],G={key:0},J={class:"flex items-center justify-between px-4 py-3 border-t border-gray-200 dark:border-gray-700"},q={class:"text-sm text-gray-700 dark:text-gray-300"},O={class:"font-medium"},Y={class:"font-medium"},Z={class:"font-medium"},$={class:"flex space-x-2 space-x-reverse"},ee=["disabled"],te={class:"flex space-x-1 space-x-reverse"},re=["onClick"],ae=["disabled"],se={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"};function le(e,t,r,le,oe,de){const ne=(0,a.g2)("router-link"),ie=(0,a.g2)("TransferModal");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("header",d,[(0,a.Lk)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",g,[(0,a.bF)(ne,{to:"/",class:"flex items-center space-x-2 space-x-reverse hover:opacity-80 transition-opacity"},{default:(0,a.k6)(()=>[...t[10]||(t[10]=[(0,a.Lk)("div",{class:"h-8 w-8 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center"},[(0,a.Lk)("span",{class:"text-white font-bold text-sm"},"م")],-1),(0,a.Lk)("div",null,[(0,a.Lk)("h1",{class:"text-lg font-bold text-gray-900 dark:text-white"},"نقل المخزون"),(0,a.Lk)("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"نظام المخزون")],-1)])]),_:1})]),(0,a.Lk)("div",u,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>le.showTransferModal=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200"},[...t[11]||(t[11]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1),(0,a.eW)(" نقل جديد ",-1)])]),(0,a.bF)(ne,{to:"/inventory",class:"inline-flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200"},{default:(0,a.k6)(()=>[...t[12]||(t[12]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),(0,a.eW)(" المخزون ",-1)])]),_:1})])])])]),(0,a.Lk)("main",c,[(0,a.Lk)("div",x,[(0,a.Lk)("div",k,[(0,a.Lk)("div",p,[t[14]||(t[14]=(0,a.Lk)("div",{class:"h-12 w-12 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center ml-4"},[(0,a.Lk)("svg",{class:"h-6 w-6 text-blue-600 dark:text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})])],-1)),(0,a.Lk)("div",null,[t[13]||(t[13]=(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"إجمالي النقل",-1)),(0,a.Lk)("p",y,(0,s.v_)(le.stats.totalTransfers),1)])])]),(0,a.Lk)("div",v,[(0,a.Lk)("div",b,[t[16]||(t[16]=(0,a.Lk)("div",{class:"h-12 w-12 rounded-lg bg-green-100 dark:bg-green-900 flex items-center justify-center ml-4"},[(0,a.Lk)("svg",{class:"h-6 w-6 text-green-600 dark:text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),(0,a.Lk)("div",null,[t[15]||(t[15]=(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"مكتمل",-1)),(0,a.Lk)("p",m,(0,s.v_)(le.stats.completed),1)])])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",f,[t[18]||(t[18]=(0,a.Lk)("div",{class:"h-12 w-12 rounded-lg bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center ml-4"},[(0,a.Lk)("svg",{class:"h-6 w-6 text-yellow-600 dark:text-yellow-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),(0,a.Lk)("div",null,[t[17]||(t[17]=(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"قيد الانتظار",-1)),(0,a.Lk)("p",w,(0,s.v_)(le.stats.pending),1)])])]),(0,a.Lk)("div",L,[(0,a.Lk)("div",C,[t[20]||(t[20]=(0,a.Lk)("div",{class:"h-12 w-12 rounded-lg bg-purple-100 dark:bg-purple-900 flex items-center justify-center ml-4"},[(0,a.Lk)("svg",{class:"h-6 w-6 text-purple-600 dark:text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1)),(0,a.Lk)("div",null,[t[19]||(t[19]=(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"إجمالي القيمة",-1)),(0,a.Lk)("p",T,(0,s.v_)(le.formatCurrency(le.stats.totalValue)),1)])])])]),(0,a.Lk)("div",_,[(0,a.Lk)("div",W,[(0,a.Lk)("div",null,[t[25]||(t[25]=(0,a.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"تصفية النتائج",-1)),(0,a.Lk)("div",j,[(0,a.Lk)("div",E,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>le.filters.dateFrom=e),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[l.Jo,le.filters.dateFrom]]),t[21]||(t[21]=(0,a.Lk)("label",{class:"absolute -top-2 right-2 px-1 text-xs bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400"}," من تاريخ ",-1))]),(0,a.Lk)("div",M,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>le.filters.dateTo=e),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[l.Jo,le.filters.dateTo]]),t[22]||(t[22]=(0,a.Lk)("label",{class:"absolute -top-2 right-2 px-1 text-xs bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400"}," إلى تاريخ ",-1))]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>le.filters.status=e),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[...t[23]||(t[23]=[(0,a.Fv)('<option value="">جميع الحالات</option><option value="pending">قيد الانتظار</option><option value="approved">مقبول</option><option value="completed">مكتمل</option><option value="rejected">مرفوض</option>',5)])],512),[[l.u1,le.filters.status]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>le.filters.sourceWarehouse=e),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t[24]||(t[24]=(0,a.Lk)("option",{value:""},"المخزن المصدر",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(le.warehouses,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.name_ar),9,P))),128))],512),[[l.u1,le.filters.sourceWarehouse]])])]),(0,a.Lk)("div",D,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>le.refreshData&&le.refreshData(...e)),class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200"},[...t[26]||(t[26]=[(0,a.Lk)("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])]),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>le.exportData&&le.exportData(...e)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200"},[...t[27]||(t[27]=[(0,a.Lk)("svg",{class:"w-5 h-5 ml-2 inline-block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),(0,a.eW)(" تصدير ",-1)])])])])]),(0,a.Lk)("div",V,[t[34]||(t[34]=(0,a.Lk)("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[(0,a.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"سجل النقل")],-1)),(0,a.Lk)("div",B,[(0,a.Lk)("table",F,[t[29]||(t[29]=(0,a.Lk)("thead",{class:"bg-gray-50 dark:bg-gray-800"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," رقم النقل "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," التاريخ "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," من مخزن "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," إلى مخزن "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," عدد الأصناف "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," الحالة "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," الإجراءات ")])],-1)),(0,a.Lk)("tbody",X,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(le.paginatedTransfers,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",K," #"+(0,s.v_)(e.id),1),(0,a.Lk)("td",H,(0,s.v_)(le.formatDate(e.created_at)),1),(0,a.Lk)("td",R,(0,s.v_)(le.getWarehouseName(e.source_warehouse_id)),1),(0,a.Lk)("td",I,(0,s.v_)(le.getWarehouseName(e.destination_warehouse_id)),1),(0,a.Lk)("td",S,(0,s.v_)(e.items_count)+" صنف ",1),(0,a.Lk)("td",z,[(0,a.Lk)("span",{class:(0,s.C4)(le.getStatusBadgeClass(e.status))},(0,s.v_)(le.getStatusText(e.status)),3)]),(0,a.Lk)("td",A,[(0,a.Lk)("button",{onClick:t=>le.viewTransferDetails(e),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 ml-3"}," عرض ",8,Q),le.canApprove(e)?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>le.approveTransfer(e),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 ml-3"}," قبول ",8,N)):(0,a.Q3)("",!0),le.canReject(e)?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>le.rejectTransfer(e),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 ml-3"}," رفض ",8,U)):(0,a.Q3)("",!0)])]))),128)),0!==le.transfers.length||le.loading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("tr",G,[...t[28]||(t[28]=[(0,a.Lk)("td",{colspan:"7",class:"px-6 py-12 text-center"},[(0,a.Lk)("div",{class:"text-gray-500 dark:text-gray-400"},[(0,a.Lk)("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})]),(0,a.Lk)("p",{class:"mt-2"},"لا توجد عمليات نقل")])],-1)])]))])])]),(0,a.Lk)("div",J,[(0,a.Lk)("div",q,[t[30]||(t[30]=(0,a.eW)(" عرض ",-1)),(0,a.Lk)("span",O,(0,s.v_)(le.startIndex+1),1),t[31]||(t[31]=(0,a.eW)(" إلى ",-1)),(0,a.Lk)("span",Y,(0,s.v_)(Math.min(le.endIndex,le.totalTransfers)),1),t[32]||(t[32]=(0,a.eW)(" من ",-1)),(0,a.Lk)("span",Z,(0,s.v_)(le.totalTransfers),1),t[33]||(t[33]=(0,a.eW)(" نتيجة ",-1))]),(0,a.Lk)("div",$,[(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>le.prevPage&&le.prevPage(...e)),disabled:1===le.currentPage,class:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-700"}," السابق ",8,ee),(0,a.Lk)("div",te,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(le.visiblePages,e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>le.goToPage(e),class:(0,s.C4)(["w-8 h-8 rounded-lg flex items-center justify-center",e===le.currentPage?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},(0,s.v_)(e),11,re))),128))]),(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>le.nextPage&&le.nextPage(...e)),disabled:le.currentPage===le.totalPages,class:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-700"}," التالي ",8,ae)])])])]),le.showTransferModal?((0,a.uX)(),(0,a.Wv)(ie,{key:0,show:le.showTransferModal,onClose:t[9]||(t[9]=e=>le.showTransferModal=!1),onSaved:le.handleTransferCreated},null,8,["show","onSaved"])):(0,a.Q3)("",!0),le.loading?((0,a.uX)(),(0,a.CE)("div",se,[...t[35]||(t[35]=[(0,a.Lk)("div",{class:"bg-white dark:bg-gray-800 rounded-xl p-8 flex flex-col items-center"},[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,a.Lk)("p",{class:"text-gray-700 dark:text-gray-300"},"جاري تحميل البيانات...")],-1)])])):(0,a.Q3)("",!0)])}var oe=r(953),de=r(834),ne=r(4502),ie={name:"Transfers",components:{TransferModal:ne.A},setup(){const e=(0,de.Pj)(),t=(0,oe.KR)(!1),r=(0,oe.KR)(!1),s=(0,oe.KR)(1),l=10,o=(0,oe.KR)({dateFrom:"",dateTo:"",status:"",sourceWarehouse:"",destinationWarehouse:"",search:""}),d=(0,oe.KR)({totalTransfers:0,completed:0,pending:0,totalValue:0}),n=(0,oe.KR)([]),i=(0,oe.KR)([]),g=(0,a.EW)(()=>e.state.user),u=(0,a.EW)(()=>g.value?.role),c=(0,a.EW)(()=>{let e=[...i.value];if(o.value.dateFrom){const t=new Date(o.value.dateFrom);e=e.filter(e=>new Date(e.created_at)>=t)}if(o.value.dateTo){const t=new Date(o.value.dateTo);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.created_at)<=t)}return o.value.status&&(e=e.filter(e=>e.status===o.value.status)),o.value.sourceWarehouse&&(e=e.filter(e=>e.source_warehouse_id===o.value.sourceWarehouse)),o.value.destinationWarehouse&&(e=e.filter(e=>e.destination_warehouse_id===o.value.destinationWarehouse)),e}),x=(0,a.EW)(()=>c.value.length),k=(0,a.EW)(()=>Math.ceil(x.value/l)),p=(0,a.EW)(()=>(s.value-1)*l),y=(0,a.EW)(()=>p.value+l),v=(0,a.EW)(()=>c.value.slice(p.value,y.value)),b=(0,a.EW)(()=>{const e=[],t=5;let r=Math.max(1,s.value-Math.floor(t/2)),a=Math.min(k.value,r+t-1);a-r+1<t&&(r=Math.max(1,a-t+1));for(let s=r;s<=a;s++)e.push(s);return e}),m=e=>{const t=new Date(e);return t.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})},h=e=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(e),f=e=>{const t=n.value.find(t=>t.id===e);return t?t.name_ar:"غير معروف"},w=e=>{const t={pending:"قيد الانتظار",approved:"مقبول",completed:"مكتمل",rejected:"مرفوض"};return t[e]||e},L=e=>{const t={pending:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",approved:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",completed:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",rejected:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return t[e]||"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"},C=e=>"superadmin"===u.value&&"pending"===e.status,T=e=>"superadmin"===u.value&&"pending"===e.status,_=async()=>{t.value=!0;try{const t=await e.dispatch("fetchWarehouses");n.value=t;const r=await e.dispatch("fetchTransfers");i.value=r,W()}catch(r){console.error("Error loading data:",r),F("خطأ في تحميل البيانات")}finally{t.value=!1}},W=()=>{d.value.totalTransfers=i.value.length,d.value.completed=i.value.filter(e=>"completed"===e.status).length,d.value.pending=i.value.filter(e=>"pending"===e.status).length,d.value.totalValue=i.value.reduce((e,t)=>e+t.total_value,0)},j=()=>{s.value=1,_()},E=()=>{console.log("Export data")},M=e=>{console.log("View transfer details:",e)},P=async t=>{if(confirm("هل أنت متأكد من قبول هذا النقل؟"))try{await e.dispatch("approveTransfer",t.id),B("تم قبول النقل بنجاح"),_()}catch(r){F("خطأ في قبول النقل")}},D=async t=>{if(confirm("هل أنت متأكد من رفض هذا النقل؟"))try{await e.dispatch("rejectTransfer",t.id),B("تم رفض النقل بنجاح"),_()}catch(r){F("خطأ في رفض النقل")}},V=()=>{r.value=!1,B("تم إنشاء النقل بنجاح"),_()},B=e=>{alert(e)},F=e=>{alert(e)},X=()=>{s.value>1&&s.value--},K=()=>{s.value<k.value&&s.value++},H=e=>{s.value=e};return(0,a.wB)(o,()=>{s.value=1},{deep:!0}),(0,a.sV)(()=>{_()}),{loading:t,showTransferModal:r,filters:o,stats:d,warehouses:n,transfers:i,currentPage:s,paginatedTransfers:v,totalTransfers:x,totalPages:k,startIndex:p,endIndex:y,visiblePages:b,formatDate:m,formatCurrency:h,getWarehouseName:f,getStatusText:w,getStatusBadgeClass:L,canApprove:C,canReject:T,refreshData:j,exportData:E,viewTransferDetails:M,approveTransfer:P,rejectTransfer:D,handleTransferCreated:V,prevPage:X,nextPage:K,goToPage:H}}},ge=r(6262);const ue=(0,ge.A)(ie,[["render",le]]);var ce=ue}}]);