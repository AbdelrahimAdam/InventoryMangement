"use strict";(self["webpackChunkmonofia_perfume_inventory"]=self["webpackChunkmonofia_perfume_inventory"]||[]).push([[569],{877:function(e,t,r){r.r(t),r.d(t,{default:function(){return ge}});var a=r(641),s=r(33),o=r(751);const i={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200"},d={class:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},l={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n={class:"flex justify-between items-center h-16"},c={class:"flex items-center space-x-4 space-x-reverse"},g={class:"flex items-center space-x-3 space-x-reverse"},k={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},x={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},u={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow duration-200"},p={class:"flex items-center"},h={class:"text-2xl font-bold text-gray-900 dark:text-white"},m={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow duration-200"},y={class:"flex items-center"},v={class:"text-2xl font-bold text-gray-900 dark:text-white"},b={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow duration-200"},w={class:"flex items-center"},f={class:"text-2xl font-bold text-gray-900 dark:text-white"},L={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8"},_={class:"flex items-center justify-between mb-6"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},C={class:"space-y-4"},E={class:"space-y-3"},j=["onClick"],M={class:"flex items-center justify-between"},K={class:"font-medium text-gray-900 dark:text-white"},X={class:"text-sm text-gray-500 dark:text-gray-400"},F={class:"space-y-3"},R={class:"flex items-center justify-between"},W={class:"font-medium text-gray-900 dark:text-white"},B={class:"text-sm text-gray-500 dark:text-gray-400"},I={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},V={class:"text-sm text-gray-600 dark:text-gray-300 mt-2"},H={class:"text-sm font-medium text-gray-900 dark:text-white mt-1"},N={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},S={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},T={class:"flex items-center justify-between"},z={class:"flex space-x-3 space-x-reverse"},G={class:"relative"},Q={key:0,class:"p-8 text-center"},q={key:1,class:"p-8 text-center"},P={key:2,class:"overflow-x-auto"},A={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},J={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800"},O={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},U={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},$={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ee={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},re=["onClick"],ae=["onClick"];function se(e,t,r,se,oe,ie){const de=(0,a.g2)("router-link"),le=(0,a.g2)("DispatchModal");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("header",d,[(0,a.Lk)("div",l,[(0,a.Lk)("div",n,[(0,a.Lk)("div",c,[(0,a.bF)(de,{to:"/",class:"flex items-center space-x-2 space-x-reverse hover:opacity-80 transition-opacity"},{default:(0,a.k6)(()=>[...t[6]||(t[6]=[(0,a.Lk)("div",{class:"h-8 w-8 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center"},[(0,a.Lk)("span",{class:"text-white font-bold text-sm"},"م")],-1),(0,a.Lk)("div",null,[(0,a.Lk)("h1",{class:"text-lg font-bold text-gray-900 dark:text-white"},"صرف المخزون"),(0,a.Lk)("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"نظام إدارة المخزون")],-1)])]),_:1})]),(0,a.Lk)("div",g,[(0,a.bF)(de,{to:"/inventory",class:"inline-flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200"},{default:(0,a.k6)(()=>[...t[7]||(t[7]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),(0,a.eW)(" المخزون ",-1)])]),_:1})])])])]),(0,a.Lk)("main",k,[(0,a.Lk)("div",x,[(0,a.Lk)("div",u,[(0,a.Lk)("div",p,[t[9]||(t[9]=(0,a.Lk)("div",{class:"h-12 w-12 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center ml-4"},[(0,a.Lk)("svg",{class:"h-6 w-6 text-blue-600 dark:text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})])],-1)),(0,a.Lk)("div",null,[t[8]||(t[8]=(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"إجمالي عمليات الصرف",-1)),(0,a.Lk)("p",h,(0,s.v_)(se.formatNumber(se.totalDispatches)),1)])])]),(0,a.Lk)("div",m,[(0,a.Lk)("div",y,[t[11]||(t[11]=(0,a.Lk)("div",{class:"h-12 w-12 rounded-lg bg-green-100 dark:bg-green-900 flex items-center justify-center ml-4"},[(0,a.Lk)("svg",{class:"h-6 w-6 text-green-600 dark:text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),(0,a.Lk)("div",null,[t[10]||(t[10]=(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"صرف هذا الشهر",-1)),(0,a.Lk)("p",v,(0,s.v_)(se.formatNumber(se.monthlyDispatches)),1)])])]),(0,a.Lk)("div",b,[(0,a.Lk)("div",w,[t[13]||(t[13]=(0,a.Lk)("div",{class:"h-12 w-12 rounded-lg bg-orange-100 dark:bg-orange-900 flex items-center justify-center ml-4"},[(0,a.Lk)("svg",{class:"h-6 w-6 text-orange-600 dark:text-orange-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),(0,a.Lk)("div",null,[t[12]||(t[12]=(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"قيمة الصرف",-1)),(0,a.Lk)("p",f,(0,s.v_)(se.formatCurrency(se.totalValue)),1)])])])]),(0,a.Lk)("div",L,[(0,a.Lk)("div",_,[t[15]||(t[15]=(0,a.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"إنشاء صرف جديد",-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>se.showDispatchModal=!0),class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-medium rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-sm"},[...t[14]||(t[14]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),(0,a.eW)(" إنشاء صرف جديد ",-1)])])]),(0,a.Lk)("div",D,[(0,a.Lk)("div",C,[t[17]||(t[17]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"الصرف السريع",-1)),(0,a.Lk)("div",E,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(se.quickDispatches,e=>((0,a.uX)(),(0,a.CE)("button",{key:e.id,onClick:t=>se.createQuickDispatch(e),class:"w-full text-right p-4 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors duration-200"},[(0,a.Lk)("div",M,[(0,a.Lk)("div",null,[(0,a.Lk)("p",K,(0,s.v_)(e.from)+" → "+(0,s.v_)(e.to),1),(0,a.Lk)("p",X,(0,s.v_)(e.items)+" أصناف",1)]),t[16]||(t[16]=(0,a.Lk)("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,j))),128))])]),(0,a.Lk)("div",null,[t[18]||(t[18]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},"آخر عمليات الصرف",-1)),(0,a.Lk)("div",F,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(se.recentDispatches,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},[(0,a.Lk)("div",R,[(0,a.Lk)("div",null,[(0,a.Lk)("p",W,(0,s.v_)(e.from)+" → "+(0,s.v_)(e.to),1),(0,a.Lk)("p",B,(0,s.v_)(e.date),1)]),(0,a.Lk)("span",I,(0,s.v_)(e.status),1)]),(0,a.Lk)("p",V,(0,s.v_)(e.description),1),(0,a.Lk)("p",H,(0,s.v_)(se.formatCurrency(e.value)),1)]))),128))])])])]),(0,a.Lk)("div",N,[(0,a.Lk)("div",S,[(0,a.Lk)("div",T,[t[19]||(t[19]=(0,a.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"سجل عمليات الصرف",-1)),(0,a.Lk)("div",z,[(0,a.Lk)("div",G,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>se.dateFilter=e),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[o.Jo,se.dateFilter]])]),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>se.refreshData&&se.refreshData(...e)),class:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200"}," تحديث "),se.canExport?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[3]||(t[3]=(...e)=>se.exportDispatches&&se.exportDispatches(...e)),class:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200"}," تصدير ")):(0,a.Q3)("",!0)])])]),se.loading?((0,a.uX)(),(0,a.CE)("div",Q,[...t[20]||(t[20]=[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),(0,a.Lk)("p",{class:"text-gray-700 dark:text-gray-300"},"جاري تحميل البيانات...",-1)])])):0===se.dispatches.length?((0,a.uX)(),(0,a.CE)("div",q,[t[21]||(t[21]=(0,a.Fv)('<div class="inline-flex items-center justify-center w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full mb-4" data-v-7500e837><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7500e837><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" data-v-7500e837></path></svg></div><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2" data-v-7500e837>لا توجد عمليات صرف</h3><p class="text-gray-500 dark:text-gray-400 mb-4" data-v-7500e837> لم يتم العثور على أي عمليات صرف </p>',3)),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>se.showDispatchModal=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200"}," إنشاء أول صرف ")])):((0,a.uX)(),(0,a.CE)("div",P,[(0,a.Lk)("table",A,[t[22]||(t[22]=(0,a.Lk)("thead",{class:"bg-gray-50 dark:bg-gray-800"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," رقم الصرف "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," التاريخ "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," من مخزن "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," إلى "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," عدد الأصناف "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," القيمة "),(0,a.Lk)("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," الإجراءات ")])],-1)),(0,a.Lk)("tbody",J,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(se.filteredDispatches,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-150"},[(0,a.Lk)("td",O," #"+(0,s.v_)(e.id),1),(0,a.Lk)("td",U,(0,s.v_)(se.formatDate(e.created_at)),1),(0,a.Lk)("td",Y,(0,s.v_)(se.getWarehouseLabel(e.from_warehouse)),1),(0,a.Lk)("td",Z,(0,s.v_)(se.getDestinationLabel(e.to_destination)),1),(0,a.Lk)("td",$,(0,s.v_)(e.items_count)+" صنف ",1),(0,a.Lk)("td",ee,(0,s.v_)(se.formatCurrency(e.total_value)),1),(0,a.Lk)("td",te,[(0,a.Lk)("button",{onClick:t=>se.viewDispatchDetails(e),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 ml-3"}," عرض ",8,re),(0,a.Lk)("button",{onClick:t=>se.printDispatch(e),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 ml-3"}," طباعة ",8,ae)])]))),128))])])]))])]),se.showDispatchModal?((0,a.uX)(),(0,a.Wv)(le,{key:0,show:se.showDispatchModal,onClose:t[5]||(t[5]=e=>se.showDispatchModal=!1),onSaved:se.handleDispatchCreated},null,8,["show","onSaved"])):(0,a.Q3)("",!0)])}var oe=r(953),ie=r(278),de=r(217),le={name:"Dispatch",components:{DispatchModal:de.A},setup(){const e=(0,ie.Pj)(),t=(0,oe.KR)(!1),r=(0,oe.KR)(!1),s=(0,oe.KR)(""),o=(0,oe.KR)([]),i=(0,oe.KR)(0),d=(0,oe.KR)(0),l=(0,oe.KR)(0),n=(0,a.EW)(()=>e.getters.userRole),c=(0,a.EW)(()=>"superadmin"===n.value||"company_manager"===n.value),g=(0,a.EW)(()=>{let e=[...o.value];return s.value&&(e=e.filter(e=>{const t=new Date(e.created_at).toISOString().split("T")[0];return t===s.value})),e}),k=(0,oe.KR)([{id:1,from:"مخزن شارع الشيخ",to:"صرف الي مصنع البران",items:10},{id:2,from:"مخزن الترعه",to:"صرف الي مخزن الزهراء",items:5},{id:3,from:"مخزن موقف شبين",to:"صرف الي مصنع البران",items:8}]),x=(0,oe.KR)([{id:1,from:"مخزن شارع الشيخ",to:"صرف الي مصنع البران",date:"2024-01-15",status:"مكتمل",description:"صرف 10 كراتين عطر فلورا",value:15e3},{id:2,from:"مخزن الترعه",to:"صرف الي مخزن الزهراء",date:"2024-01-14",status:"مكتمل",description:"صرف 5 كراتين عطر نايت",value:8e3}]),u=e=>new Intl.NumberFormat("ar-EG").format(e||0),p=e=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(e||0),h=e=>{if(!e)return"";const t=new Date(e);return t.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})},m=t=>e.getters.getWarehouseLabel(t)||t,y=t=>e.getters.getDestinationLabel(t)||t,v=e=>{console.log("Create quick dispatch:",e),t.value=!0},b=e=>{console.log("View dispatch details:",e)},w=e=>{console.log("Print dispatch:",e)},f=()=>{r.value=!0,setTimeout(()=>{o.value=[{id:1,created_at:"2024-01-15T10:30:00",from_warehouse:"main_warehouse",to_destination:"factory",items_count:10,total_value:15e3},{id:2,created_at:"2024-01-14T14:20:00",from_warehouse:"tera_warehouse",to_destination:"zahra",items_count:5,total_value:8e3},{id:3,created_at:"2024-01-13T09:15:00",from_warehouse:"shobeen_warehouse",to_destination:"factory",items_count:8,total_value:12e3}],i.value=o.value.length,d.value=3,l.value=o.value.reduce((e,t)=>e+(t.total_value||0),0),r.value=!1},1e3)},L=()=>{alert("ميزة تصدير الصرف قريباً...")},_=()=>{t.value=!1,alert("تم إنشاء الصرف بنجاح"),f()};return(0,a.sV)(()=>{f()}),(0,a.wB)(s,()=>{}),{showDispatchModal:t,loading:r,dateFilter:s,dispatches:o,totalDispatches:i,monthlyDispatches:d,totalValue:l,quickDispatches:k,recentDispatches:x,filteredDispatches:g,canExport:c,formatNumber:u,formatCurrency:p,formatDate:h,getWarehouseLabel:m,getDestinationLabel:y,createQuickDispatch:v,viewDispatchDetails:b,printDispatch:w,refreshData:f,exportDispatches:L,handleDispatchCreated:_}}},ne=r(262);const ce=(0,ne.A)(le,[["render",se],["__scopeId","data-v-7500e837"]]);var ge=ce}}]);