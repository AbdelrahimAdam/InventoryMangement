"use strict";(self["webpackChunkmonofia_perfume_inventory"]=self["webpackChunkmonofia_perfume_inventory"]||[]).push([[630],{630:function(e,t,r){r.r(t),r.d(t,{default:function(){return Y}});var a=r(641),s=r(33);const o={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200"},l={class:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},n={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},i={class:"flex justify-between items-center h-16"},d={class:"flex items-center space-x-4 space-x-reverse"},u={class:"flex items-center space-x-3 space-x-reverse"},c={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},g={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},k={class:"px-6 py-8 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800"},m={class:"flex flex-col md:flex-row md:items-center gap-6"},x={class:"flex-shrink-0"},p={class:"h-24 w-24 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center shadow-lg"},h={class:"text-white text-2xl font-bold"},v={class:"flex-1"},b={class:"text-2xl font-bold text-gray-900 dark:text-white"},y={class:"text-gray-600 dark:text-gray-400 mt-1"},f={class:"flex flex-wrap gap-3 mt-4"},w={class:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},L={key:0,class:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},C={class:"px-6 py-8"},_={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},P={class:"space-y-4"},W={class:"text-gray-900 dark:text-white"},E={class:"text-gray-900 dark:text-white"},M={class:"text-gray-900 dark:text-white"},j={class:"text-gray-900 dark:text-white"},S={class:"space-y-4"},z={class:"text-gray-900 dark:text-white"},B={class:"text-gray-900 dark:text-white"},R={key:0},A={class:"text-gray-900 dark:text-white"},D={key:0},H={key:1,class:"text-gray-500 dark:text-gray-400"},X={class:"text-gray-900 dark:text-white"},U={class:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6"},V={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6"},F={class:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"},K={class:"flex flex-wrap gap-4"};function T(e,t,r,T,O,Z){const $=(0,a.g2)("router-link"),q=(0,a.g2)("ResetPasswordModal");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("header",l,[(0,a.Lk)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[(0,a.bF)($,{to:"/",class:"flex items-center space-x-2 space-x-reverse hover:opacity-80 transition-opacity"},{default:(0,a.k6)(()=>[...t[6]||(t[6]=[(0,a.Lk)("div",{class:"h-8 w-8 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center"},[(0,a.Lk)("span",{class:"text-white font-bold text-sm"},"م")],-1),(0,a.Lk)("div",null,[(0,a.Lk)("h1",{class:"text-lg font-bold text-gray-900 dark:text-white"},"الملف الشخصي"),(0,a.Lk)("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"نظام إدارة المخزون")],-1)])]),_:1})]),(0,a.Lk)("div",u,[(0,a.bF)($,{to:"/",class:"inline-flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200"},{default:(0,a.k6)(()=>[...t[7]||(t[7]=[(0,a.eW)(" الرئيسية ",-1)])]),_:1})])])])]),(0,a.Lk)("main",c,[(0,a.Lk)("div",g,[(0,a.Lk)("div",k,[(0,a.Lk)("div",m,[(0,a.Lk)("div",x,[(0,a.Lk)("div",p,[(0,a.Lk)("span",h,(0,s.v_)(T.getUserInitials(T.userProfile?.name)),1)])]),(0,a.Lk)("div",v,[(0,a.Lk)("h2",b,(0,s.v_)(T.userProfile?.name),1),(0,a.Lk)("p",y,(0,s.v_)(T.userProfile?.email),1),(0,a.Lk)("div",f,[(0,a.Lk)("span",{class:(0,s.C4)(T.roleBadgeClass)},(0,s.v_)(T.getRoleText(T.userRole)),3),(0,a.Lk)("span",w,[t[8]||(t[8]=(0,a.Lk)("svg",{class:"w-4 h-4 inline-block ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),(0,a.eW)(" "+(0,s.v_)(!1===T.userProfile?.is_active?"غير نشيط":"نشيط"),1)]),T.lastLogin?((0,a.uX)(),(0,a.CE)("span",L,[t[9]||(t[9]=(0,a.Lk)("svg",{class:"w-4 h-4 inline-block ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),(0,a.eW)(" آخر تسجيل: "+(0,s.v_)(T.lastLogin),1)])):(0,a.Q3)("",!0)])])])]),(0,a.Lk)("div",C,[(0,a.Lk)("div",_,[(0,a.Lk)("div",null,[t[14]||(t[14]=(0,a.Lk)("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-gray-700"},[(0,a.Lk)("svg",{class:"w-5 h-5 inline-block ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),(0,a.eW)(" المعلومات الشخصية ")],-1)),(0,a.Lk)("div",P,[(0,a.Lk)("div",null,[t[10]||(t[10]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"اسم المستخدم",-1)),(0,a.Lk)("div",W,(0,s.v_)(T.user?.email?.split("@")[0]||T.userProfile?.name),1)]),(0,a.Lk)("div",null,[t[11]||(t[11]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"البريد الإلكتروني",-1)),(0,a.Lk)("div",E,(0,s.v_)(T.userProfile?.email),1)]),(0,a.Lk)("div",null,[t[12]||(t[12]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"رقم الهاتف",-1)),(0,a.Lk)("div",M,(0,s.v_)(T.userProfile?.phone||"غير محدد"),1)]),(0,a.Lk)("div",null,[t[13]||(t[13]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"تاريخ التسجيل",-1)),(0,a.Lk)("div",j,(0,s.v_)(T.formatDate(T.userProfile?.created_at)),1)])])]),(0,a.Lk)("div",null,[t[19]||(t[19]=(0,a.Lk)("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-gray-700"},[(0,a.Lk)("svg",{class:"w-5 h-5 inline-block ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),(0,a.eW)(" معلومات الحساب ")],-1)),(0,a.Lk)("div",S,[(0,a.Lk)("div",null,[t[15]||(t[15]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"الدور",-1)),(0,a.Lk)("div",z,(0,s.v_)(T.getRoleDescription(T.userRole)),1)]),(0,a.Lk)("div",null,[t[16]||(t[16]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"الصلاحيات",-1)),(0,a.Lk)("div",B,(0,s.v_)(T.getPermissionsDescription(T.userRole)),1)]),"warehouse_manager"===T.userRole?((0,a.uX)(),(0,a.CE)("div",R,[t[17]||(t[17]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"المخازن المسموحة",-1)),(0,a.Lk)("div",A,[T.allowedWarehouses.length>0?((0,a.uX)(),(0,a.CE)("div",D,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(T.allowedWarehouses,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"mb-1"}," • "+(0,s.v_)(T.getWarehouseLabel(e)),1))),128))])):((0,a.uX)(),(0,a.CE)("div",H," لا توجد مخازن مخصصة "))])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[18]||(t[18]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"آخر تسجيل دخول",-1)),(0,a.Lk)("div",X,(0,s.v_)(T.formatDate(T.userProfile?.last_login)||"غير متوفر"),1)])])])]),(0,a.Lk)("div",U,[t[26]||(t[26]=(0,a.Lk)("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},[(0,a.Lk)("svg",{class:"w-5 h-5 inline-block ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m0 0v2m0-2h2m-2 0H9m3-6a3 3 0 110-6 3 3 0 010 6zm2 7a9 9 0 11-18 0 9 9 0 0118 0z"})]),(0,a.eW)(" الأمان والحماية ")],-1)),(0,a.Lk)("div",I,[(0,a.Lk)("div",Q,[t[21]||(t[21]=(0,a.Lk)("h4",{class:"text-md font-medium text-gray-900 dark:text-white mb-3"},"تغيير كلمة المرور",-1)),t[22]||(t[22]=(0,a.Lk)("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," قم بتغيير كلمة المرور الخاصة بك بشكل دوري للحفاظ على أمان حسابك ",-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>T.showChangePasswordModal=!0),class:"w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200"},[...t[20]||(t[20]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})],-1),(0,a.eW)(" تغيير كلمة المرور ",-1)])])]),(0,a.Lk)("div",V,[t[24]||(t[24]=(0,a.Lk)("h4",{class:"text-md font-medium text-gray-900 dark:text-white mb-3"},"إدارة الجلسات",-1)),t[25]||(t[25]=(0,a.Lk)("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," عرض وإدارة جميع جلسات تسجيل الدخول النشطة على جهازك ",-1)),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>T.manageSessions&&T.manageSessions(...e)),class:"w-full inline-flex items-center justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200"},[...t[23]||(t[23]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1),(0,a.eW)(" إدارة الجلسات ",-1)])])])])]),(0,a.Lk)("div",F,[(0,a.Lk)("div",K,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>T.editProfile&&T.editProfile(...e)),class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-sm"},[...t[27]||(t[27]=[(0,a.Lk)("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),(0,a.eW)(" تعديل المعلومات ",-1)])]),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>T.logoutAllDevices&&T.logoutAllDevices(...e)),class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white font-medium rounded-lg hover:from-orange-700 hover:to-red-700 transition-all duration-200 shadow-sm"},[...t[28]||(t[28]=[(0,a.Lk)("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),(0,a.eW)(" تسجيل خروج من جميع الأجهزة ",-1)])]),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>T.logout&&T.logout(...e)),class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 text-white font-medium rounded-lg hover:from-red-700 hover:to-pink-700 transition-all duration-200 shadow-sm"},[...t[29]||(t[29]=[(0,a.Lk)("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),(0,a.eW)(" تسجيل خروج ",-1)])])])])])])]),T.showChangePasswordModal?((0,a.uX)(),(0,a.Wv)(q,{key:0,show:T.showChangePasswordModal,"user-id":T.currentUserId,onClose:t[5]||(t[5]=e=>T.showChangePasswordModal=!1),onSaved:T.handlePasswordChanged},null,8,["show","user-id","onSaved"])):(0,a.Q3)("",!0)])}var O=r(953),Z=r(278),$=r(499),q=r(949),G={name:"Profile",components:{ResetPasswordModal:q.A},setup(){const e=(0,Z.Pj)(),t=(0,$.rd)(),r=(0,O.KR)(!1),s=(0,a.EW)(()=>e.state.user),o=(0,a.EW)(()=>e.state.userProfile),l=(0,a.EW)(()=>e.getters.userRole),n=(0,a.EW)(()=>s.value?.uid),i=(0,a.EW)(()=>{const t=o.value?.allowed_warehouses||[],r=e.state.warehouses||[];return r.filter(e=>t.includes(e.id))}),d=(0,a.EW)(()=>{if(!o.value?.last_login)return null;const e=new Date(o.value.last_login);return e.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),u=(0,a.EW)(()=>{const e={superadmin:"px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r from-purple-500 to-pink-500 text-white",warehouse_manager:"px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r from-blue-500 to-cyan-500 text-white",company_manager:"px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white"};return e[l.value]||"px-3 py-1 rounded-full text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),c=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"?",g=e=>{const t={superadmin:"المشرف العام",warehouse_manager:"مدير المخازن",company_manager:"مدير الشركة"};return t[e]||"مستخدم"},k=e=>{const t={superadmin:"صلاحيات كاملة على النظام",warehouse_manager:"إدارة المخزون في المخازن المسموحة",company_manager:"عرض التقارير ومراقبة المخزون"};return t[e]||"مستخدم عادي"},m=e=>{const t={superadmin:"جميع الصلاحيات",warehouse_manager:"إدارة المخزون، النقل، الصرف في المخازن المسموحة",company_manager:"عرض المخزون، التقارير، الإحصائيات"};return t[e]||"صلاحيات محدودة"},x=e=>e.name_ar||e.id,p=e=>{if(!e)return"";const t=new Date(e);return t.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},h=()=>{alert("ميزة تعديل الملف الشخصي قريباً...")},v=()=>{alert("ميزة إدارة الجلسات قريباً...")},b=async()=>{if(confirm("هل تريد تسجيل الخروج من جميع الأجهزة؟\nسيتم تسجيل خروجك من جميع الجلسات النشطة."))try{alert("تم تسجيل الخروج من جميع الأجهزة")}catch(e){console.error("Error logging out from all devices:",e),alert("حدث خطأ أثناء تسجيل الخروج من جميع الأجهزة")}},y=async()=>{if(confirm("هل تريد تسجيل الخروج؟"))try{await e.dispatch("logout"),t.push("/login")}catch(r){console.error("Logout error:",r),alert("حدث خطأ أثناء تسجيل الخروج")}},f=()=>{r.value=!1,alert("تم تغيير كلمة المرور بنجاح")};return{showChangePasswordModal:r,user:s,userProfile:o,userRole:l,currentUserId:n,allowedWarehouses:i,lastLogin:d,roleBadgeClass:u,getUserInitials:c,getRoleText:g,getRoleDescription:k,getPermissionsDescription:m,getWarehouseLabel:x,formatDate:p,editProfile:h,manageSessions:v,logoutAllDevices:b,logout:y,handlePasswordChanged:f}}},N=r(262);const J=(0,N.A)(G,[["render",T],["__scopeId","data-v-73543577"]]);var Y=J},949:function(e,t,r){r.d(t,{A:function(){return j}});var a=r(641),s=r(751),o=r(33);const l={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},n={class:"bg-white rounded-lg w-full max-w-md rtl"},i={class:"flex justify-between items-center p-6 border-b border-gray-200"},d={key:0,class:"text-center"},u={class:"h-16 w-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-3"},c={class:"text-indigo-600 font-medium text-lg"},g={class:"text-lg font-medium text-gray-900"},k={class:"text-sm text-gray-500 mt-1"},m={class:"mt-2"},x={key:1,class:"space-y-2"},p={class:"flex justify-between items-center"},h={class:"h-2 bg-gray-200 rounded-full overflow-hidden"},v={class:"text-xs text-gray-600 space-y-1 list-disc pr-5"},b={key:2,class:"bg-red-50 border border-red-200 rounded-md p-4"},y={class:"text-sm text-red-700"},f={class:"flex gap-3 pt-6 border-t border-gray-200"},w=["disabled"],L={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},C={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function _(e,t,r,_,P,W){return r.isOpen?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",n,[(0,a.Lk)("div",i,[t[6]||(t[6]=(0,a.Lk)("h2",{class:"text-xl font-semibold text-gray-800"},"إعادة تعيين كلمة المرور",-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"p-1 hover:bg-gray-100 rounded transition-colors duration-200"},[...t[5]||(t[5]=[(0,a.Lk)("svg",{class:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)((...e)=>_.handleSubmit&&_.handleSubmit(...e),["prevent"])),class:"p-6 space-y-6"},[r.user?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("span",c,(0,o.v_)(_.getUserInitials(r.user.name||r.user.email)),1)]),(0,a.Lk)("h3",g,(0,o.v_)(r.user.name||r.user.email),1),(0,a.Lk)("p",k,(0,o.v_)(r.user.email),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[7]||(t[7]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[(0,a.eW)(" كلمة المرور الجديدة "),(0,a.Lk)("span",{class:"text-red-500"},"*")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>_.newPassword=e),class:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200",placeholder:"أدخل كلمة المرور الجديدة"},null,512),[[s.Jo,_.newPassword]]),(0,a.Lk)("div",m,[(0,a.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>_.generatePassword&&_.generatePassword(...e)),class:"text-sm text-indigo-600 hover:text-indigo-800"}," توليد كلمة مرور عشوائية ")]),t[8]||(t[8]=(0,a.Lk)("p",{class:"text-xs text-gray-500 mt-2"}," يجب أن تكون كلمة المرور 6 أحرف على الأقل. سيتمكن المستخدم من تغييرها بعد الدخول. ",-1))]),_.newPassword?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("div",p,[t[9]||(t[9]=(0,a.Lk)("span",{class:"text-sm font-medium text-gray-700"},"قوة كلمة المرور:",-1)),(0,a.Lk)("span",{class:(0,o.C4)(["text-sm font-medium",_.passwordStrengthClass])},(0,o.v_)(_.passwordStrengthText),3)]),(0,a.Lk)("div",h,[(0,a.Lk)("div",{class:(0,o.C4)(["h-full transition-all duration-300",_.passwordStrengthClass]),style:(0,o.Tr)({width:_.passwordStrengthPercentage+"%"})},null,6)]),(0,a.Lk)("ul",v,[(0,a.Lk)("li",{class:(0,o.C4)(_.hasLength?"text-green-600":"")},"8 أحرف على الأقل",2),(0,a.Lk)("li",{class:(0,o.C4)(_.hasUppercase?"text-green-600":"")},"حرف كبير واحد على الأقل",2),(0,a.Lk)("li",{class:(0,o.C4)(_.hasLowercase?"text-green-600":"")},"حرف صغير واحد على الأقل",2),(0,a.Lk)("li",{class:(0,o.C4)(_.hasNumber?"text-green-600":"")},"رقم واحد على الأقل",2),(0,a.Lk)("li",{class:(0,o.C4)(_.hasSpecialChar?"text-green-600":"")},"رمز خاص واحد على الأقل",2)])])):(0,a.Q3)("",!0),_.errorMessage?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.Lk)("p",y,(0,o.v_)(_.errorMessage),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",f,[(0,a.Lk)("button",{type:"button",onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"flex-1 py-3 px-4 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors duration-200 font-medium"}," إلغاء "),(0,a.Lk)("button",{type:"submit",disabled:_.loading||!_.isFormValid,class:"flex-1 py-3 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 font-medium flex items-center justify-center gap-2"},[_.loading?((0,a.uX)(),(0,a.CE)("svg",L,[...t[10]||(t[10]=[(0,a.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),(0,a.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):((0,a.uX)(),(0,a.CE)("svg",C,[...t[11]||(t[11]=[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"},null,-1)])])),(0,a.eW)(" "+(0,o.v_)(_.loading?"جاري التحديث...":"تحديث كلمة المرور"),1)],8,w)])],32)])])):(0,a.Q3)("",!0)}var P=r(953),W={name:"ResetPasswordModal",props:{isOpen:{type:Boolean,required:!0},user:{type:Object,default:null}},emits:["close","reset"],setup(e,{emit:t}){const r=(0,P.KR)(!1),s=(0,P.KR)(""),o=(0,P.KR)(""),l=(0,a.EW)(()=>{if(!o.value)return 0;let e=0;const t=o.value;return t.length>=8&&(e+=20),/[A-Z]/.test(t)&&(e+=20),/[a-z]/.test(t)&&(e+=20),/[0-9]/.test(t)&&(e+=20),/[^A-Za-z0-9]/.test(t)&&(e+=20),e}),n=(0,a.EW)(()=>Math.min(l.value,100)),i=(0,a.EW)(()=>{const e=l.value;return e<40?"ضعيفة":e<60?"متوسطة":e<80?"جيدة":"قوية جداً"}),d=(0,a.EW)(()=>{const e=l.value;return e<40?"bg-red-500 text-red-500":e<60?"bg-yellow-500 text-yellow-500":e<80?"bg-blue-500 text-blue-500":"bg-green-500 text-green-500"}),u=(0,a.EW)(()=>o.value.length>=8),c=(0,a.EW)(()=>/[A-Z]/.test(o.value)),g=(0,a.EW)(()=>/[a-z]/.test(o.value)),k=(0,a.EW)(()=>/[0-9]/.test(o.value)),m=(0,a.EW)(()=>/[^A-Za-z0-9]/.test(o.value)),x=(0,a.EW)(()=>o.value.length>=6),p=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"?",h=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let t="";for(let r=0;r<12;r++)t+=e.charAt(Math.floor(Math.random()*e.length));o.value=t},v=()=>{o.value="",s.value="",r.value=!1},b=async()=>{if(x.value&&e.user){r.value=!0,s.value="";try{t("reset",{userId:e.user.id,newPassword:o.value})}catch(a){console.error("Error in password reset:",a),s.value=a.message||"حدث خطأ أثناء إعادة تعيين كلمة المرور"}finally{r.value=!1}}};return(0,a.wB)(()=>e.isOpen,e=>{e&&(v(),h())}),{loading:r,errorMessage:s,newPassword:o,passwordStrengthPercentage:n,passwordStrengthText:i,passwordStrengthClass:d,hasLength:u,hasUppercase:c,hasLowercase:g,hasNumber:k,hasSpecialChar:m,isFormValid:x,getUserInitials:p,generatePassword:h,handleSubmit:b}}},E=r(262);const M=(0,E.A)(W,[["render",_]]);var j=M}}]);