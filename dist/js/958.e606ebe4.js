"use strict";(self["webpackChunkmonofia_perfume_inventory"]=self["webpackChunkmonofia_perfume_inventory"]||[]).push([[958],{4958:function(e,t,r){r.r(t),r.d(t,{default:function(){return ft}});var a=r(641),o=r(33),s=r(3751);const l={class:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-200"},n={class:"pt-16 lg:pt-0 pb-20 lg:pb-0"},i={class:"container mx-auto px-4 py-4 sm:px-6 sm:py-6"},d={class:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 mb-3 sm:mb-4"},c={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 p-3 sm:p-4 hover:shadow-md transition-all duration-200 group"},u={class:"flex items-center"},m={class:"flex-1 text-right"},k={class:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white"},g={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 p-3 sm:p-4 hover:shadow-md transition-all duration-200 group"},p={class:"flex items-center"},h={class:"flex-1 text-right"},v={class:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white"},x={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 p-3 sm:p-4 hover:shadow-md transition-all duration-200 group"},b={class:"flex items-center"},f={class:"flex-1 text-right"},y={class:"text-lg sm:text-xl font-bold text-red-600 dark:text-red-400"},w={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 p-3 sm:p-4 hover:shadow-md transition-all duration-200 group"},L={class:"flex items-center"},C={class:"flex-1 text-right"},_={class:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white"},E={class:"flex flex-col sm:flex-row gap-2 sm:gap-3 mb-3 sm:mb-4"},M={key:0,class:"relative flex-1"},I=["value"],j={class:"flex gap-2"},D=["disabled"],X=["disabled"],W={class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-300/50 dark:border-gray-600/50 p-3 sm:p-4 mb-3 sm:mb-4"},S={class:"flex flex-col sm:flex-row gap-3"},B={class:"flex-1"},T={class:"relative"},R={class:"lg:hidden space-y-2"},F={key:0,class:"p-6 text-center rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm"},H={key:1,class:"p-4 rounded-xl bg-red-50/80 dark:bg-red-900/20 backdrop-blur-sm border border-red-200/50 dark:border-red-800/50"},V={class:"flex items-start gap-2"},A={class:"text-sm text-red-700 dark:text-red-300"},q={key:2,class:"p-6 text-center rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50"},Q={class:"text-xs text-gray-500 dark:text-gray-400"},z={key:3},K={class:"flex justify-between items-start mb-3"},O={class:"text-sm font-bold text-gray-900 dark:text-white mb-1"},U={class:"flex items-center gap-2"},J={class:"text-xs font-mono bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded"},N={class:"space-y-2 text-xs text-gray-600 dark:text-gray-400"},P={class:"flex items-center gap-2"},$={class:"flex items-center gap-2"},G={class:"flex items-center gap-2"},Y={key:0,class:"mt-3 pt-3 border-t border-gray-200/50 dark:border-gray-700/50"},Z={class:"flex justify-between gap-2"},ee=["onClick"],te=["onClick"],re=["onClick"],ae={class:"hidden lg:block bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden"},oe={class:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200/50 dark:border-gray-700/50"},se={class:"grid grid-cols-12 gap-2 px-4 py-3 text-xs font-semibold text-gray-700 dark:text-gray-300"},le={key:0,class:"col-span-2 text-center"},ne={key:1,class:"col-span-2 text-center"},ie={class:"table-body max-h-[calc(100vh-400px)] min-h-[300px] overflow-y-auto"},de={key:0,class:"p-8 text-center"},ce={key:1,class:"p-6 text-center"},ue={class:"text-red-700 dark:text-red-300 mb-3"},me={key:2,class:"p-8 text-center"},ke={class:"text-sm text-gray-500 dark:text-gray-400"},ge={key:3},pe={class:"col-span-3"},he={class:"font-medium text-sm text-gray-900 dark:text-white mb-1"},ve={key:0,class:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1"},xe={class:"flex items-center gap-2 mt-1"},be={class:"text-xs text-gray-500"},fe={class:"text-xs text-gray-500"},ye={class:"col-span-1 text-center"},we={class:"text-xs font-mono bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded"},Le={class:"col-span-1 text-center"},Ce={class:"flex items-center justify-center"},_e={class:"text-sm text-gray-700 dark:text-gray-300"},Ee={class:"col-span-1 text-center"},Me={class:"text-sm text-gray-600 dark:text-gray-400"},Ie={class:"col-span-1 text-center"},je={class:"text-sm text-gray-600 dark:text-gray-400"},De={class:"col-span-1 text-center"},Xe={class:"text-sm text-gray-600 dark:text-gray-400"},We={class:"col-span-1 text-center"},Se={class:"flex flex-col items-center"},Be={class:"text-xs text-gray-500 mt-0.5"},Te={class:"col-span-1 text-center"},Re={key:0,class:"col-span-2 text-center"},Fe={class:"flex items-center justify-center gap-2"},He=["onClick"],Ve=["onClick"],Ae=["onClick"],qe=["onClick"],Qe={key:1,class:"col-span-2 text-center"},ze={class:"text-xs text-gray-500 dark:text-gray-400"},Ke={key:0,class:"flex flex-col sm:flex-row items-center justify-between px-4 py-3 border-t border-gray-200/50 dark:border-gray-700/50 gap-3 mt-4"},Oe={class:"text-sm text-gray-700 dark:text-gray-300 text-center sm:text-right"},Ue={class:"font-medium"},Je={key:4,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"};function Ne(e,t,r,Ne,Pe,$e){const Ge=(0,a.g2)("AddItemModal"),Ye=(0,a.g2)("DispatchModal"),Ze=(0,a.g2)("EditItemModal"),et=(0,a.g2)("TransferModal");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("main",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[t[16]||(t[16]=(0,a.Lk)("div",{class:"h-9 w-9 sm:h-10 sm:w-10 rounded-lg bg-gradient-to-br from-blue-500/20 to-blue-500/10 flex items-center justify-center ml-2 sm:ml-3 group-hover:from-blue-500/30 group-hover:to-blue-500/20 transition-all duration-200"},[(0,a.Lk)("svg",{class:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),(0,a.Lk)("div",m,[t[15]||(t[15]=(0,a.Lk)("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},"الأصناف",-1)),(0,a.Lk)("p",k,(0,o.v_)(Ne.formatNumber(Ne.stats.totalItems)),1)])])]),(0,a.Lk)("div",g,[(0,a.Lk)("div",p,[t[18]||(t[18]=(0,a.Lk)("div",{class:"h-9 w-9 sm:h-10 sm:w-10 rounded-lg bg-gradient-to-br from-green-500/20 to-green-500/10 flex items-center justify-center ml-2 sm:ml-3 group-hover:from-green-500/30 group-hover:to-green-500/20 transition-all duration-200"},[(0,a.Lk)("svg",{class:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),(0,a.Lk)("div",h,[t[17]||(t[17]=(0,a.Lk)("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},"الكمية",-1)),(0,a.Lk)("p",v,(0,o.v_)(Ne.formatNumber(Ne.stats.totalQuantity)),1)])])]),(0,a.Lk)("div",x,[(0,a.Lk)("div",b,[t[20]||(t[20]=(0,a.Lk)("div",{class:"h-9 w-9 sm:h-10 sm:w-10 rounded-lg bg-gradient-to-br from-orange-500/20 to-orange-500/10 flex items-center justify-center ml-2 sm:ml-3 group-hover:from-orange-500/30 group-hover:to-orange-500/20 transition-all duration-200"},[(0,a.Lk)("svg",{class:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),(0,a.Lk)("div",f,[t[19]||(t[19]=(0,a.Lk)("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},"قليلة",-1)),(0,a.Lk)("p",y,(0,o.v_)(Ne.formatNumber(Ne.stats.lowStockItems)),1)])])]),(0,a.Lk)("div",w,[(0,a.Lk)("div",L,[t[22]||(t[22]=(0,a.Lk)("div",{class:"h-9 w-9 sm:h-10 sm:w-10 rounded-lg bg-gradient-to-br from-purple-500/20 to-purple-500/10 flex items-center justify-center ml-2 sm:ml-3 group-hover:from-purple-500/30 group-hover:to-purple-500/20 transition-all duration-200"},[(0,a.Lk)("svg",{class:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),(0,a.Lk)("div",C,[t[21]||(t[21]=(0,a.Lk)("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},"الحركات",-1)),(0,a.Lk)("p",_,(0,o.v_)(Ne.formatNumber(Ne.stats.recentTransactions)),1)])])])]),(0,a.Lk)("div",E,[Ne.accessibleWarehouses.length>0?((0,a.uX)(),(0,a.CE)("div",M,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>Ne.selectedWarehouse=e),onChange:t[1]||(t[1]=(...e)=>Ne.updateWarehouseFilter&&Ne.updateWarehouseFilter(...e)),class:"w-full appearance-none bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl py-2.5 pl-10 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all duration-200"},[t[23]||(t[23]=(0,a.Lk)("option",{value:""},"جميع المخازن",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Ne.accessibleWarehouses,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name_ar),9,I))),128))],544),[[s.u1,Ne.selectedWarehouse]]),t[24]||(t[24]=(0,a.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,a.Lk)("svg",{class:"h-4 w-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))])):(0,a.Q3)("",!0),(0,a.Lk)("div",j,[Ne.canAddItem?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=e=>Ne.showAddModal=!0),class:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2.5 bg-gradient-to-br from-blue-500 to-purple-500 text-white text-sm font-medium rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all duration-200 shadow-sm hover:shadow active:scale-[0.98]"},[...t[25]||(t[25]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 4v16m8-8H4"})],-1),(0,a.Lk)("span",{class:"hidden sm:inline"},"إضافة صنف",-1),(0,a.Lk)("span",{class:"sm:hidden"},"إضافة",-1)])])):(0,a.Q3)("",!0),Ne.canExport?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[3]||(t[3]=(...e)=>Ne.exportInventory&&Ne.exportInventory(...e)),class:"p-2.5 sm:hidden bg-gradient-to-br from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-sm",title:"تصدير"},[...t[26]||(t[26]=[(0,a.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])])):(0,a.Q3)("",!0),Ne.canExport?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>Ne.exportInventory&&Ne.exportInventory(...e)),class:"hidden sm:inline-flex items-center px-3 py-2.5 bg-gradient-to-br from-green-500 to-emerald-500 text-white text-sm font-medium rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-sm active:scale-[0.98]"},[...t[27]||(t[27]=[(0,a.Lk)("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),(0,a.eW)(" تصدير ",-1)])])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>Ne.refreshData&&Ne.refreshData(...e)),class:"p-2.5 sm:hidden bg-gray-200/80 dark:bg-gray-700/80 backdrop-blur-sm text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300/80 dark:hover:bg-gray-600/80 transition-all duration-200",disabled:Ne.loading,title:"تحديث"},[((0,a.uX)(),(0,a.CE)("svg",{class:(0,o.C4)(["w-4 h-4",Ne.loading?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[28]||(t[28]=[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],8,D),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>Ne.refreshData&&Ne.refreshData(...e)),class:"hidden sm:inline-flex items-center px-3 py-2.5 bg-gray-200/80 dark:bg-gray-700/80 backdrop-blur-sm text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300/80 dark:hover:bg-gray-600/80 transition-all duration-200 active:scale-[0.98]",disabled:Ne.loading},[((0,a.uX)(),(0,a.CE)("svg",{class:(0,o.C4)(["w-4 h-4 ml-2",Ne.loading?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[29]||(t[29]=[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),t[30]||(t[30]=(0,a.Lk)("span",{class:"hidden sm:inline"},"تحديث",-1))],8,X)])]),(0,a.Lk)("div",W,[(0,a.Lk)("div",S,[(0,a.Lk)("div",B,[(0,a.Lk)("div",T,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>Ne.searchTerm=e),onInput:t[8]||(t[8]=(...e)=>Ne.handleSearch&&Ne.handleSearch(...e)),placeholder:"ابحث باسم الصنف، الكود، اللون، أو المورد...",class:"w-full pr-10 pl-4 py-2.5 sm:py-3 border border-gray-300/50 dark:border-gray-600/50 rounded-xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-sm backdrop-blur-sm transition-all duration-200"},null,544),[[s.Jo,Ne.searchTerm]]),t[31]||(t[31]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,a.Lk)("svg",{class:"h-4 w-4 sm:h-5 sm:w-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>Ne.statusFilter=e),onChange:t[10]||(t[10]=(...e)=>Ne.updateStatusFilter&&Ne.updateStatusFilter(...e)),class:"flex-1 sm:flex-none px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300/50 dark:border-gray-600/50 rounded-xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-sm backdrop-blur-sm transition-all duration-200"},[...t[32]||(t[32]=[(0,a.Lk)("option",{value:""},"جميع الحالات",-1),(0,a.Lk)("option",{value:"in_stock"},"متوفر",-1),(0,a.Lk)("option",{value:"low_stock"},"كمية قليلة",-1),(0,a.Lk)("option",{value:"out_of_stock"},"غير متوفر",-1)])],544),[[s.u1,Ne.statusFilter]])])]),(0,a.Lk)("div",R,[Ne.loading?((0,a.uX)(),(0,a.CE)("div",F,[...t[33]||(t[33]=[(0,a.Lk)("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"},null,-1),(0,a.Lk)("p",{class:"text-sm text-gray-700 dark:text-gray-300"},"جاري تحميل البيانات...",-1)])])):Ne.error?((0,a.uX)(),(0,a.CE)("div",H,[(0,a.Lk)("div",V,[t[34]||(t[34]=(0,a.Lk)("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),(0,a.Lk)("p",A,(0,o.v_)(Ne.error),1)])])):0===Ne.filteredItems.length?((0,a.uX)(),(0,a.CE)("div",q,[t[35]||(t[35]=(0,a.Lk)("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full mb-3"},[(0,a.Lk)("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m8-8V4a1 1 0 00-1-1h-2a1 1 0 00-1 1v1M9 7h6"})])],-1)),t[36]||(t[36]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-900 dark:text-white mb-1"},"لا توجد بيانات",-1)),(0,a.Lk)("p",Q,(0,o.v_)(Ne.searchTerm?"لم يتم العثور على أصناف مطابقة للبحث":"لم يتم إضافة أي أصناف بعد."),1)])):((0,a.uX)(),(0,a.CE)("div",z,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Ne.filteredItems,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 p-4 hover:shadow-md transition-all duration-200"},[(0,a.Lk)("div",K,[(0,a.Lk)("div",null,[(0,a.Lk)("h3",O,(0,o.v_)(e.name),1),(0,a.Lk)("div",U,[(0,a.Lk)("span",J,(0,o.v_)(e.code),1),(0,a.Lk)("span",{class:(0,o.C4)([Ne.getStockStatusClass(e.remaining_quantity),"text-xs px-2 py-0.5 rounded-full"])},(0,o.v_)(Ne.getStockStatus(e.remaining_quantity)),3)])]),(0,a.Lk)("span",{class:(0,o.C4)([Ne.getQuantityClass(e.remaining_quantity),"text-lg font-bold"])},(0,o.v_)(e.remaining_quantity),3)]),(0,a.Lk)("div",N,[(0,a.Lk)("div",P,[t[37]||(t[37]=(0,a.Lk)("svg",{class:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})],-1)),(0,a.Lk)("span",null,(0,o.v_)(Ne.getWarehouseLabel(e.warehouse_id))+" • "+(0,o.v_)(e.item_location||"بدون مكان"),1)]),(0,a.Lk)("div",$,[t[38]||(t[38]=(0,a.Lk)("svg",{class:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),(0,a.Lk)("span",null,"اللون: "+(0,o.v_)(e.color||"بدون"),1)]),(0,a.Lk)("div",G,[t[39]||(t[39]=(0,a.Lk)("svg",{class:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),(0,a.Lk)("span",null,"المورد: "+(0,o.v_)(e.supplier||"بدون"),1)])]),Ne.showActions&&!Ne.readonly&&"viewer"!==Ne.userRole?((0,a.uX)(),(0,a.CE)("div",Y,[(0,a.Lk)("div",Z,[Ne.canEditItem(e)?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>Ne.handleEdit(e),class:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-yellow-50/80 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 text-xs font-medium rounded-lg hover:bg-yellow-100/80 dark:hover:bg-yellow-800/20 transition-colors"},[...t[40]||(t[40]=[(0,a.Lk)("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),(0,a.eW)(" تعديل ",-1)])],8,ee)):(0,a.Q3)("",!0),Ne.canTransferItem(e)?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>Ne.handleTransfer(e),class:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-blue-50/80 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs font-medium rounded-lg hover:bg-blue-100/80 dark:hover:bg-blue-800/20 transition-colors"},[...t[41]||(t[41]=[(0,a.Lk)("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1),(0,a.eW)(" نقل ",-1)])],8,te)):(0,a.Q3)("",!0),Ne.canDispatchItem(e)?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t=>Ne.handleDispatch(e),class:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-purple-50/80 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 text-xs font-medium rounded-lg hover:bg-purple-100/80 dark:hover:bg-purple-800/20 transition-colors"},[...t[42]||(t[42]=[(0,a.Lk)("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),(0,a.eW)(" صرف ",-1)])],8,re)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)]))),128))]))]),(0,a.Lk)("div",ae,[(0,a.Lk)("div",oe,[(0,a.Lk)("div",se,[t[43]||(t[43]=(0,a.Fv)('<div class="col-span-3" data-v-f9f1b6a2>الاسم والتفاصيل</div><div class="col-span-1 text-center" data-v-f9f1b6a2>الكود</div><div class="col-span-1 text-center" data-v-f9f1b6a2>اللون</div><div class="col-span-1 text-center" data-v-f9f1b6a2>المخزن</div><div class="col-span-1 text-center" data-v-f9f1b6a2>المورد</div><div class="col-span-1 text-center" data-v-f9f1b6a2>المكان</div><div class="col-span-1 text-center" data-v-f9f1b6a2>الكمية</div><div class="col-span-1 text-center" data-v-f9f1b6a2>الحالة</div>',8)),Ne.showActions&&!Ne.readonly&&"viewer"!==Ne.userRole?((0,a.uX)(),(0,a.CE)("div",le,"الإجراءات")):((0,a.uX)(),(0,a.CE)("div",ne,"آخر تحديث"))])]),(0,a.Lk)("div",ie,[Ne.loading?((0,a.uX)(),(0,a.CE)("div",de,[...t[44]||(t[44]=[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),(0,a.Lk)("p",{class:"text-gray-700 dark:text-gray-300"},"جاري تحميل البيانات...",-1)])])):Ne.error?((0,a.uX)(),(0,a.CE)("div",ce,[t[45]||(t[45]=(0,a.Lk)("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full mb-3"},[(0,a.Lk)("svg",{class:"w-6 h-6 text-red-600 dark:text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),(0,a.Lk)("p",ue,(0,o.v_)(Ne.error),1)])):0===Ne.filteredItems.length?((0,a.uX)(),(0,a.CE)("div",me,[t[46]||(t[46]=(0,a.Lk)("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full mb-3"},[(0,a.Lk)("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m8-8V4a1 1 0 00-1-1h-2a1 1 0 00-1 1v1M9 7h6"})])],-1)),t[47]||(t[47]=(0,a.Lk)("h3",{class:"text-base font-medium text-gray-900 dark:text-white mb-1"},"لا توجد بيانات",-1)),(0,a.Lk)("p",ke,(0,o.v_)(Ne.searchTerm?"لم يتم العثور على أصناف مطابقة للبحث":"لم يتم إضافة أي أصناف بعد."),1)])):((0,a.uX)(),(0,a.CE)("div",ge,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Ne.filteredItems,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"grid grid-cols-12 gap-2 px-4 py-3 border-b border-gray-100/50 dark:border-gray-700/50 hover:bg-gray-50/50 dark:hover:bg-gray-750 transition-colors duration-200"},[(0,a.Lk)("div",pe,[(0,a.Lk)("div",he,(0,o.v_)(e.name),1),e.item_location?((0,a.uX)(),(0,a.CE)("div",ve,[t[48]||(t[48]=(0,a.Lk)("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),(0,a.eW)(" "+(0,o.v_)(e.item_location),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",xe,[(0,a.Lk)("div",be," كراتين: "+(0,o.v_)(e.cartons_count)+" × "+(0,o.v_)(e.per_carton_count),1),(0,a.Lk)("div",fe," فردي: "+(0,o.v_)(e.single_bottles_count),1)])]),(0,a.Lk)("div",ye,[(0,a.Lk)("span",we,(0,o.v_)(e.code),1)]),(0,a.Lk)("div",Le,[(0,a.Lk)("div",Ce,[(0,a.Lk)("span",_e,(0,o.v_)(e.color),1)])]),(0,a.Lk)("div",Ee,[(0,a.Lk)("div",Me,(0,o.v_)(Ne.getWarehouseLabel(e.warehouse_id)),1)]),(0,a.Lk)("div",Ie,[(0,a.Lk)("div",je,(0,o.v_)(e.supplier||"-"),1)]),(0,a.Lk)("div",De,[(0,a.Lk)("div",Xe,(0,o.v_)(e.item_location||"-"),1)]),(0,a.Lk)("div",We,[(0,a.Lk)("div",Se,[(0,a.Lk)("span",{class:(0,o.C4)([Ne.getQuantityClass(e.remaining_quantity),"text-sm font-medium"])},(0,o.v_)(e.remaining_quantity),3),(0,a.Lk)("span",Be," من "+(0,o.v_)(e.total_added),1)])]),(0,a.Lk)("div",Te,[(0,a.Lk)("span",{class:(0,o.C4)([Ne.getStockStatusClass(e.remaining_quantity),"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"])},(0,o.v_)(Ne.getStockStatus(e.remaining_quantity)),3)]),Ne.showActions&&!Ne.readonly&&"viewer"!==Ne.userRole?((0,a.uX)(),(0,a.CE)("div",Re,[(0,a.Lk)("div",Fe,[(0,a.Lk)("button",{onClick:t=>Ne.handleTransfer(e),class:"p-1.5 bg-blue-50/80 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 rounded-lg hover:bg-blue-100/80 dark:hover:bg-blue-800/20 transition-colors",title:"نقل"},[...t[49]||(t[49]=[(0,a.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],8,He),(0,a.Lk)("button",{onClick:t=>Ne.handleDispatch(e),class:"p-1.5 bg-purple-50/80 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300 rounded-lg hover:bg-purple-100/80 dark:hover:bg-purple-800/20 transition-colors",title:"صرف"},[...t[50]||(t[50]=[(0,a.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)])],8,Ve),Ne.canEditItem(e)?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>Ne.handleEdit(e),class:"p-1.5 bg-yellow-50/80 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-300 rounded-lg hover:bg-yellow-100/80 dark:hover:bg-yellow-800/20 transition-colors",title:"تعديل"},[...t[51]||(t[51]=[(0,a.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ae)):(0,a.Q3)("",!0),Ne.canDeleteItem(e)?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>Ne.handleDelete(e),class:"p-1.5 bg-red-50/80 dark:bg-red-900/20 text-red-600 dark:text-red-300 rounded-lg hover:bg-red-100/80 dark:hover:bg-red-800/20 transition-colors",title:"حذف"},[...t[52]||(t[52]=[(0,a.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,qe)):(0,a.Q3)("",!0)])])):((0,a.uX)(),(0,a.CE)("div",Qe,[(0,a.Lk)("span",ze,(0,o.v_)(Ne.formatDate(e.updated_at)),1)]))]))),128))]))])]),Ne.filteredItems.length>0?((0,a.uX)(),(0,a.CE)("div",Ke,[(0,a.Lk)("div",Oe,[t[53]||(t[53]=(0,a.eW)(" عرض ",-1)),(0,a.Lk)("span",Ue,(0,o.v_)(Ne.filteredItems.length),1),t[54]||(t[54]=(0,a.eW)(" نتيجة ",-1))])])):(0,a.Q3)("",!0)])]),Ne.showAddModal?((0,a.uX)(),(0,a.Wv)(Ge,{key:0,isOpen:Ne.showAddModal,onClose:t[11]||(t[11]=e=>Ne.showAddModal=!1),onSuccess:Ne.handleItemSaved},null,8,["isOpen","onSuccess"])):(0,a.Q3)("",!0),Ne.showDispatchModal?((0,a.uX)(),(0,a.Wv)(Ye,{key:1,isOpen:Ne.showDispatchModal,item:Ne.selectedItemForDispatch,onClose:t[12]||(t[12]=e=>Ne.showDispatchModal=!1),onSuccess:Ne.handleDispatchSuccess},null,8,["isOpen","item","onSuccess"])):(0,a.Q3)("",!0),Ne.showEditModal?((0,a.uX)(),(0,a.Wv)(Ze,{key:2,isOpen:Ne.showEditModal,item:Ne.selectedItemForEdit,onClose:t[13]||(t[13]=e=>Ne.showEditModal=!1),onSuccess:Ne.handleItemUpdated},null,8,["isOpen","item","onSuccess"])):(0,a.Q3)("",!0),Ne.showTransferModal?((0,a.uX)(),(0,a.Wv)(et,{key:3,isOpen:Ne.showTransferModal,item:Ne.selectedItemForTransfer,onClose:t[14]||(t[14]=e=>Ne.showTransferModal=!1),onSuccess:Ne.handleTransferSuccess},null,8,["isOpen","item","onSuccess"])):(0,a.Q3)("",!0),Ne.operationLoading?((0,a.uX)(),(0,a.CE)("div",Je,[...t[55]||(t[55]=[(0,a.Lk)("div",{class:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl p-6 sm:p-8 flex flex-col items-center shadow-2xl m-4 border border-gray-200/50 dark:border-gray-700/50"},[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,a.Lk)("p",{class:"text-gray-700 dark:text-gray-300 font-medium"},"جاري المعالجة..."),(0,a.Lk)("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},"يرجى الانتظار")],-1)])])):(0,a.Q3)("",!0)])}var Pe=r(953),$e=r(834),Ge=r(5499),Ye=r(8038),Ze=r(6217);const et={class:"fixed inset-0 z-10 overflow-y-auto"},tt={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},rt={class:"bg-white px-6 py-4 border-b border-gray-200"},at={class:"flex items-center justify-between"},ot={class:"space-y-4"},st=["value"],lt={class:"mt-6 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 sm:space-x-reverse gap-3"},nt=["disabled"],it={key:0};function dt(e,t,r,l,n,i){const d=(0,a.g2)("TransitionChild"),c=(0,a.g2)("DialogTitle"),u=(0,a.g2)("XIcon"),m=(0,a.g2)("DialogPanel"),k=(0,a.g2)("Dialog"),g=(0,a.g2)("TransitionRoot");return(0,a.uX)(),(0,a.Wv)(g,{as:"template",show:r.isOpen},{default:(0,a.k6)(()=>[(0,a.bF)(k,{as:"div",class:"relative z-50",onClose:l.closeModal},{default:(0,a.k6)(()=>[(0,a.bF)(d,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,a.k6)(()=>[...t[10]||(t[10]=[(0,a.Lk)("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),(0,a.Lk)("div",et,[(0,a.Lk)("div",tt,[(0,a.bF)(d,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",rt,[(0,a.Lk)("div",at,[(0,a.bF)(c,{class:"text-lg font-semibold text-gray-900"},{default:(0,a.k6)(()=>[...t[11]||(t[11]=[(0,a.eW)("تعديل الصنف",-1)])]),_:1}),(0,a.Lk)("button",{type:"button",class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))},[t[12]||(t[12]=(0,a.Lk)("span",{class:"sr-only"},"إغلاق",-1)),(0,a.bF)(u,{class:"h-6 w-6"})])])]),(0,a.Lk)("form",{onSubmit:t[9]||(t[9]=(0,s.D$)((...e)=>l.handleSubmit&&l.handleSubmit(...e),["prevent"])),class:"bg-white px-6 py-4"},[(0,a.Lk)("div",ot,[(0,a.Lk)("div",null,[t[13]||(t[13]=(0,a.Lk)("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"},"اسم الصنف",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.name=e),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل اسم الصنف"},null,512),[[s.Jo,l.formData.name]])]),(0,a.Lk)("div",null,[t[14]||(t[14]=(0,a.Lk)("label",{for:"code",class:"block text-sm font-medium text-gray-700 mb-1"},"الكود",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"code","onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.code=e),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل كود الصنف"},null,512),[[s.Jo,l.formData.code]])]),(0,a.Lk)("div",null,[t[15]||(t[15]=(0,a.Lk)("label",{for:"color",class:"block text-sm font-medium text-gray-700 mb-1"},"اللون",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"color","onUpdate:modelValue":t[3]||(t[3]=e=>l.formData.color=e),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل اللون"},null,512),[[s.Jo,l.formData.color]])]),(0,a.Lk)("div",null,[t[16]||(t[16]=(0,a.Lk)("label",{for:"quantity",class:"block text-sm font-medium text-gray-700 mb-1"},"الكمية",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"quantity","onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.quantity=e),required:"",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل الكمية"},null,512),[[s.Jo,l.formData.quantity]])]),(0,a.Lk)("div",null,[t[17]||(t[17]=(0,a.Lk)("label",{for:"price",class:"block text-sm font-medium text-gray-700 mb-1"},"السعر",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"price","onUpdate:modelValue":t[5]||(t[5]=e=>l.formData.price=e),required:"",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل السعر"},null,512),[[s.Jo,l.formData.price]])]),(0,a.Lk)("div",null,[t[19]||(t[19]=(0,a.Lk)("label",{for:"warehouse",class:"block text-sm font-medium text-gray-700 mb-1"},"المخزن",-1)),(0,a.bo)((0,a.Lk)("select",{id:"warehouse","onUpdate:modelValue":t[6]||(t[6]=e=>l.formData.warehouse_id=e),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[t[18]||(t[18]=(0,a.Lk)("option",{value:""},"اختر المخزن",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.warehouses,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name_ar),9,st))),128))],512),[[s.u1,l.formData.warehouse_id]])]),(0,a.Lk)("div",null,[t[20]||(t[20]=(0,a.Lk)("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"},"الوصف",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"description","onUpdate:modelValue":t[7]||(t[7]=e=>l.formData.description=e),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل وصف الصنف"},null,512),[[s.Jo,l.formData.description]])])]),(0,a.Lk)("div",lt,[(0,a.Lk)("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"w-full sm:w-auto px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200"}," إلغاء "),(0,a.Lk)("button",{type:"submit",disabled:l.loading,class:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center"},[l.loading?((0,a.uX)(),(0,a.CE)("span",it,[...t[21]||(t[21]=[(0,a.Lk)("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,a.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,a.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(0,a.Q3)("",!0),t[22]||(t[22]=(0,a.eW)(" حفظ التغييرات ",-1))],8,nt)])],32)]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])}var ct=r(7770),ut=r(4232),mt=r(8353),kt={name:"EditItemModal",components:{Dialog:ct.lG,DialogPanel:ct.Lj,DialogTitle:ct.L3,TransitionChild:ut._,TransitionRoot:ut.O,XIcon:mt.A},props:{isOpen:{type:Boolean,required:!0},item:{type:Object,default:null}},emits:["close","success"],setup(e,{emit:t}){const r=(0,$e.Pj)(),o=(0,Pe.KR)(!1),s=(0,Pe.Kh)({name:"",code:"",color:"",quantity:0,price:0,warehouse_id:"",description:""}),l=(0,Pe.KR)([]);(0,a.wB)(()=>e.item,e=>{e&&Object.assign(s,{name:e.name||"",code:e.code||"",color:e.color||"",quantity:e.quantity||0,price:e.price||0,warehouse_id:e.warehouse_id||"",description:e.description||""})},{immediate:!0});const n=async()=>{try{l.value=await r.dispatch("fetchWarehouses")}catch(e){console.error("Error fetching warehouses:",e)}};n();const i=()=>{t("close")},d=async()=>{if(!o.value){o.value=!0;try{await r.dispatch("updateInventoryItem",{id:e.item.id,...s}),t("success"),i()}catch(a){console.error("Error updating item:",a)}finally{o.value=!1}}};return{formData:s,loading:o,warehouses:l,closeModal:i,handleSubmit:d}}},gt=r(6262);const pt=(0,gt.A)(kt,[["render",dt]]);var ht=pt,vt=r(4502),xt={name:"Inventory",components:{AddItemModal:Ye.A,DispatchModal:Ze.A,EditItemModal:ht,TransferModal:vt.A},setup(){const e=(0,$e.Pj)(),t=(0,Ge.lq)(),r=(0,Pe.KR)(!1),o=(0,Pe.KR)(""),s=(0,Pe.KR)(!1),l=(0,Pe.KR)(!1),n=(0,Pe.KR)(!1),i=(0,Pe.KR)(!1),d=(0,Pe.KR)(""),c=(0,Pe.KR)(""),u=(0,Pe.KR)(""),m=(0,Pe.KR)(null),k=(0,Pe.KR)(null),g=(0,Pe.KR)(null),p=(0,a.EW)(()=>e.getters.userRole),h=(0,a.EW)(()=>e.state.userProfile),v=(0,a.EW)(()=>e.state.inventory||[]),x=(0,a.EW)(()=>e.getters.dashboardStats||{}),b=(0,a.EW)(()=>e.state.operationLoading),f=(0,a.EW)(()=>e.state.operationError),y=(0,a.EW)(()=>e.getters.accessibleWarehouses||[]),w=(0,a.EW)(()=>e.state.warehouses||[]),L=(0,a.EW)(()=>"superadmin"===p.value||"warehouse_manager"===p.value&&h.value?.allowed_warehouses?.length>0),C=(0,a.EW)(()=>"superadmin"===p.value||"warehouse_manager"===p.value),_=(0,a.EW)(()=>"superadmin"===p.value||"company_manager"===p.value),E=(0,a.EW)(()=>"viewer"!==p.value),M=(0,a.EW)(()=>"viewer"===p.value),I=e=>{if(!C.value)return!1;if("warehouse_manager"===p.value){const t=h.value?.allowed_warehouses||[];return t.includes(e.warehouse_id)}return!0},j=e=>I(e),D=e=>I(e),X=e=>I(e),W=(0,a.EW)(()=>{let e=[...v.value];if(u.value&&(e=e.filter(e=>e.warehouse_id===u.value)),c.value&&(e=e.filter(e=>{const t=e.remaining_quantity||0;return"in_stock"===c.value?t>=10:"low_stock"===c.value?t>0&&t<10:"out_of_stock"!==c.value||0===t})),d.value){const t=d.value.toLowerCase();e=e.filter(e=>e.name?.toLowerCase().includes(t)||e.code?.toLowerCase().includes(t)||e.color?.toLowerCase().includes(t)||e.supplier?.toLowerCase().includes(t))}return e}),S=e=>new Intl.NumberFormat("ar-EG").format(e||0),B=e=>{const t=w.value.find(t=>t.id===e);return t?t.name_ar:e},T=e=>0===e?"نفذ":e<10?"منخفض":"متوفر",R=e=>0===e?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":e<10?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",F=e=>0===e?"text-red-600 dark:text-red-400":e<10?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",H=e=>{if(!e)return"-";const t=e.toDate?e.toDate():new Date(e);return new Intl.DateTimeFormat("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)},V=()=>{},A=()=>{},q=()=>{},Q=()=>{d.value="",c.value="",u.value="",o.value="",e.dispatch("fetchInventory")},z=()=>{try{const e=["اسم الصنف","الكود","اللون","المخزن","المورد","مكان الصنف","عدد الكراتين","عدد في الكرتونة","عدد القطع الفردية","المجموع المضاف","المجموع المتبقي","الحالة","تاريخ التحديث"],t=W.value.map(e=>[e.name||"",e.code||"",e.color||"",B(e.warehouse_id)||"",e.supplier||"",e.item_location||"",e.cartons_count||0,e.per_carton_count||0,e.single_bottles_count||0,e.total_added||0,e.remaining_quantity||0,T(e.remaining_quantity),H(e.updated_at)]),r=["\ufeff"+e.join(","),...t.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(a),s=document.createElement("a");s.href=o,s.download=`مخزون-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(o),document.body.removeChild(s)}catch(e){o.value="فشل في تصدير الملف: "+e.message}},K=e=>{j(e)?(k.value=e,n.value=!0):alert("ليس لديك صلاحية النقل من هذا المخزن")},O=e=>{D(e)?(g.value=e,i.value=!0):alert("ليس لديك صلاحية الصرف من هذا المخزن")},U=e=>{I(e)?(m.value=e,l.value=!0):alert("ليس لديك صلاحية التعديل على هذا المخزن")},J=t=>{X(t)?confirm(`هل أنت متأكد من حذف الصنف "${t.name}" (${t.code})؟`)&&e.dispatch("deleteInventoryItem",t.id).then(()=>{alert("تم حذف الصنف بنجاح")}).catch(e=>{o.value="فشل في حذف الصنف: "+e.message}):alert("ليس لديك صلاحية الحذف من هذا المخزن")},N=()=>{s.value=!1,alert("تم إضافة الصنف بنجاح")},P=()=>{l.value=!1,m.value=null,alert("تم تحديث الصنف بنجاح")},$=()=>{n.value=!1,k.value=null,alert("تم النقل بنجاح")},G=()=>{i.value=!1,g.value=null,alert("تم الصرف بنجاح")};return(0,a.sV)(()=>{1===y.value.length&&(u.value=y.value[0].id),"AddInventory"===t.name&&(s.value=!0)}),(0,a.wB)(f,t=>{t&&(o.value=t,setTimeout(()=>{o.value="",e.commit("CLEAR_OPERATION_ERROR")},5e3))}),{loading:r,error:o,showAddModal:s,showEditModal:l,showTransferModal:n,showDispatchModal:i,searchTerm:d,statusFilter:c,selectedWarehouse:u,selectedItemForEdit:m,selectedItemForTransfer:k,selectedItemForDispatch:g,userRole:p,userProfile:h,inventory:v,stats:x,operationLoading:b,operationError:f,accessibleWarehouses:y,allWarehouses:w,canAddItem:L,canExport:_,showActions:E,readonly:M,filteredItems:W,formatNumber:S,getWarehouseLabel:B,getStockStatus:T,getStockStatusClass:R,getQuantityClass:F,formatDate:H,canEditItem:I,canTransferItem:j,canDispatchItem:D,canDeleteItem:X,updateWarehouseFilter:V,updateStatusFilter:A,handleSearch:q,refreshData:Q,exportInventory:z,handleTransfer:K,handleDispatch:O,handleEdit:U,handleDelete:J,handleItemSaved:N,handleItemUpdated:P,handleTransferSuccess:$,handleDispatchSuccess:G}}};const bt=(0,gt.A)(xt,[["render",Ne],["__scopeId","data-v-f9f1b6a2"]]);var ft=bt}}]);