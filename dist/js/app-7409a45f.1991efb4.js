"use strict";(self["webpackChunkmonofia_perfume_inventory"]=self["webpackChunkmonofia_perfume_inventory"]||[]).push([[375],{4013:function(e,r,a){a.d(r,{A:function(){return Oe}});var t=a(641),s=a(33),o=a(3751);const l={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},d={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl rtl max-h-[90vh] overflow-y-auto"},n={class:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700"},i={class:"text-xl font-semibold text-gray-800 dark:text-white"},u={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},c=["readonly"],g={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},m={class:"relative inline-flex items-center cursor-pointer"},p={class:"mr-3 text-sm font-medium text-gray-700 dark:text-gray-300"},k={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},b=["value","onUpdate:modelValue","disabled"],v={class:"flex w-full items-center justify-between"},h={class:"flex items-center"},y={class:"text-sm"},x={class:"font-medium text-gray-900 dark:text-white"},w={class:"text-gray-500 dark:text-gray-400 text-xs mt-1"},f={key:0,class:"h-5 w-5 text-blue-600 dark:text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},L={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},_={key:0},C={class:"flex justify-between items-center mb-3"},W={class:"flex gap-2"},E={key:0,class:"text-center py-4"},D={key:1,class:"space-y-3"},X={key:0},M={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},S={class:"flex items-center h-5"},P=["value"],j={class:"mr-3 text-sm flex-1"},A={class:"flex justify-between items-start"},V={class:"font-medium text-gray-900 dark:text-white"},K={class:"text-gray-500 dark:text-gray-400 text-xs mt-1"},Q={class:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},B=["onClick"],R={class:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2"},z={key:1},F={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},U={class:"flex items-center h-5"},H=["value"],N={class:"mr-3 text-sm"},I={class:"font-medium text-gray-900 dark:text-white"},$={class:"text-gray-500 dark:text-gray-400 text-xs mt-1"},O={key:2,class:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},q={class:"flex items-center gap-2"},J={class:"text-sm text-green-700 dark:text-green-300"},T={class:"mt-2 text-xs text-green-600 dark:text-green-400"},G={class:"mr-2 font-medium"},Z={key:2,class:"text-center py-8 border-2 border-dashed border-gray-200 dark:border-gray-600 rounded-lg"},Y={class:"mt-4"},ee={key:1},re={class:"flex justify-between items-center mb-3"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},se={class:"space-y-2"},oe=["value"],le={class:"mr-3 text-sm"},de={class:"font-medium text-gray-700 dark:text-gray-300"},ne={class:"text-gray-500 dark:text-gray-400 text-xs mt-1"},ie={class:"mt-4 flex gap-2 flex-wrap"},ue={key:2,class:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg"},ce={class:"flex justify-between items-center mb-2"},ge={class:"flex gap-2"},me={class:"flex gap-3"},pe=["type"],ke={class:"mt-2"},be={class:"flex items-center justify-between mb-1"},ve={class:"h-1 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},he={key:0,class:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md"},ye={class:"flex items-center gap-2"},xe={class:"flex-1 font-mono text-sm bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700"},we={key:3,class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Le={class:"text-sm text-blue-700 dark:text-blue-300"},_e={class:"mt-1 text-xs text-blue-600 dark:text-blue-400"},Ce={class:"text-sm text-blue-700 dark:text-blue-300"},We={key:0,class:"mt-1 text-xs text-blue-600 dark:text-blue-400 truncate"},Ee={key:0},De={key:4,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4"},Xe={class:"text-sm text-red-700 dark:text-red-300 list-disc pr-5 space-y-1"},Me={key:5,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4"},Se={class:"flex items-center gap-2"},Pe={class:"text-sm text-red-700 dark:text-red-300"},je={class:"flex gap-3 pt-6 border-t border-gray-200 dark:border-gray-700"},Ae=["disabled"],Ve={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ke={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Qe(e,r,a,Qe,Be,Re){const ze=(0,t.g2)("WarehouseModal");return(0,t.uX)(),(0,t.CE)(t.FK,null,[a.isOpen?((0,t.uX)(),(0,t.CE)("div",l,[(0,t.Lk)("div",d,[(0,t.Lk)("div",n,[(0,t.Lk)("h2",i,(0,s.v_)(a.user?"تعديل المستخدم":"إضافة مستخدم جديد"),1),(0,t.Lk)("button",{onClick:r[0]||(r[0]=r=>e.$emit("close")),class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200"},[...r[23]||(r[23]=[(0,t.Lk)("svg",{class:"w-6 h-6 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),(0,t.Lk)("form",{onSubmit:r[22]||(r[22]=(0,o.D$)((...e)=>Qe.handleSubmit&&Qe.handleSubmit(...e),["prevent"])),class:"p-6 space-y-6"},[(0,t.Lk)("div",u,[(0,t.Lk)("div",null,[r[24]||(r[24]=(0,t.Lk)("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[(0,t.eW)(" الاسم الكامل "),(0,t.Lk)("span",{class:"text-red-500"},"*")],-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",required:"","onUpdate:modelValue":r[1]||(r[1]=e=>Qe.formData.name=e),class:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"أدخل الاسم الكامل"},null,512),[[o.Jo,Qe.formData.name]])]),(0,t.Lk)("div",null,[r[25]||(r[25]=(0,t.Lk)("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[(0,t.eW)(" البريد الإلكتروني "),(0,t.Lk)("span",{class:"text-red-500"},"*")],-1)),(0,t.bo)((0,t.Lk)("input",{type:"email",required:"","onUpdate:modelValue":r[2]||(r[2]=e=>Qe.formData.email=e),readonly:!!a.user,class:(0,s.C4)(["w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",{"bg-gray-100 dark:bg-gray-800":!!a.user}]),placeholder:"example@company.com"},null,10,c),[[o.Jo,Qe.formData.email]])])]),(0,t.Lk)("div",g,[(0,t.Lk)("div",null,[r[26]||(r[26]=(0,t.Lk)("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," رقم الهاتف ",-1)),(0,t.bo)((0,t.Lk)("input",{type:"tel","onUpdate:modelValue":r[3]||(r[3]=e=>Qe.formData.phone=e),class:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"01XXXXXXXXX"},null,512),[[o.Jo,Qe.formData.phone]])]),(0,t.Lk)("div",null,[r[28]||(r[28]=(0,t.Lk)("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"حالة الحساب",-1)),(0,t.Lk)("label",m,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":r[4]||(r[4]=e=>Qe.formData.is_active=e),class:"sr-only peer"},null,512),[[o.lH,Qe.formData.is_active]]),r[27]||(r[27]=(0,t.Lk)("div",{class:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1)),(0,t.Lk)("span",p,(0,s.v_)(Qe.formData.is_active?"نشط":"غير نشط"),1)])])]),(0,t.Lk)("div",null,[r[30]||(r[30]=(0,t.Lk)("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},[(0,t.eW)(" الدور "),(0,t.Lk)("span",{class:"text-red-500"},"*")],-1)),(0,t.Lk)("div",k,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Qe.availableRoles,e=>((0,t.uX)(),(0,t.CE)("label",{key:e.value,class:(0,s.C4)(["relative flex cursor-pointer rounded-lg border p-4 focus:outline-none transition-colors duration-200",{"border-blue-600 dark:border-blue-500 bg-blue-50 dark:bg-blue-900/20":Qe.formData.role===e.value,"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700":Qe.formData.role!==e.value}])},[(0,t.bo)((0,t.Lk)("input",{type:"radio",value:e.value,"onUpdate:modelValue":e=>Qe.formData.role=e,disabled:"superadmin"===a.user?.role,class:"sr-only"},null,8,b),[[o.XL,Qe.formData.role]]),(0,t.Lk)("div",v,[(0,t.Lk)("div",h,[(0,t.Lk)("div",y,[(0,t.Lk)("div",x,(0,s.v_)(e.name),1),(0,t.Lk)("div",w,(0,s.v_)(e.description),1)])]),Qe.formData.role===e.value?((0,t.uX)(),(0,t.CE)("svg",f,[...r[29]||(r[29]=[(0,t.Lk)("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):(0,t.Q3)("",!0)])],2))),128))]),"superadmin"===a.user?.role?((0,t.uX)(),(0,t.CE)("p",L," لا يمكن تغيير دور المشرف العام ")):(0,t.Q3)("",!0)]),"warehouse_manager"===Qe.formData.role?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("div",C,[r[32]||(r[32]=(0,t.Lk)("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[(0,t.eW)(" المخازن المسموحة "),(0,t.Lk)("span",{class:"text-red-500"},"*")],-1)),(0,t.Lk)("div",W,[(0,t.Lk)("button",{type:"button",onClick:r[5]||(r[5]=(...e)=>Qe.toggleAllWarehouses&&Qe.toggleAllWarehouses(...e)),class:"text-sm px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"},(0,s.v_)(Qe.formData.allowed_warehouses.length===Qe.allWarehouses.length?"إلغاء الكل":"اختيار الكل"),1),(0,t.Lk)("button",{type:"button",onClick:r[6]||(r[6]=(...e)=>Qe.manageWarehouses&&Qe.manageWarehouses(...e)),class:"text-sm px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-md hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors duration-200 flex items-center gap-1"},[...r[31]||(r[31]=[(0,t.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),(0,t.eW)(" إدارة المخازن ",-1)])])])]),r[44]||(r[44]=(0,t.Lk)("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-3"}," اختر المخازن التي يمكن للمستخدم الوصول إليها. سيتمكن المستخدم من إجراء جميع العمليات في المخازن المختارة. ",-1)),Qe.loadingWarehouses?((0,t.uX)(),(0,t.CE)("div",E,[...r[33]||(r[33]=[(0,t.Lk)("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 dark:border-blue-400 mx-auto"},null,-1),(0,t.Lk)("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},"جاري تحميل المخازن...",-1)])])):((0,t.uX)(),(0,t.CE)("div",D,[Qe.primaryWarehouses.length>0?((0,t.uX)(),(0,t.CE)("div",X,[r[36]||(r[36]=(0,t.Lk)("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"المخازن الرئيسية",-1)),(0,t.Lk)("div",M,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Qe.primaryWarehouses,e=>((0,t.uX)(),(0,t.CE)("label",{key:e.id,class:(0,s.C4)(["relative flex items-start p-3 border rounded-lg transition-colors duration-200 group",{"border-blue-300 dark:border-blue-500 bg-blue-50 dark:bg-blue-900/20":Qe.formData.allowed_warehouses.includes(e.id),"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600":!Qe.formData.allowed_warehouses.includes(e.id)}])},[(0,t.Lk)("div",S,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":r[7]||(r[7]=e=>Qe.formData.allowed_warehouses=e),class:"h-4 w-4 text-blue-600 dark:text-blue-400 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400"},null,8,P),[[o.lH,Qe.formData.allowed_warehouses]])]),(0,t.Lk)("div",j,[(0,t.Lk)("div",A,[(0,t.Lk)("div",null,[(0,t.Lk)("div",V,(0,s.v_)(e.name_ar),1),(0,t.Lk)("div",K,(0,s.v_)(e.name_en),1)]),(0,t.Lk)("div",Q,[(0,t.Lk)("button",{type:"button",onClick:(0,o.D$)(r=>Qe.editWarehouse(e),["stop"]),class:"p-1 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400",title:"تعديل"},[...r[34]||(r[34]=[(0,t.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,B)])]),(0,t.Lk)("div",R,[(0,t.Lk)("span",null,"السعة: "+(0,s.v_)(e.capacity||"غير محددة"),1),r[35]||(r[35]=(0,t.Lk)("span",null,"•",-1)),(0,t.Lk)("span",null,"الموقع: "+(0,s.v_)(e.location||"غير محدد"),1)])])],2))),128))])])):(0,t.Q3)("",!0),Qe.dispatchWarehouses.length>0?((0,t.uX)(),(0,t.CE)("div",z,[r[37]||(r[37]=(0,t.Lk)("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"مواقع الصرف",-1)),(0,t.Lk)("div",F,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Qe.dispatchWarehouses,e=>((0,t.uX)(),(0,t.CE)("label",{key:e.id,class:(0,s.C4)(["relative flex items-start p-3 border rounded-lg transition-colors duration-200",{"border-purple-300 dark:border-purple-500 bg-purple-50 dark:bg-purple-900/20":Qe.formData.allowed_warehouses.includes(e.id),"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600":!Qe.formData.allowed_warehouses.includes(e.id)}])},[(0,t.Lk)("div",U,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":r[8]||(r[8]=e=>Qe.formData.allowed_warehouses=e),class:"h-4 w-4 text-purple-600 dark:text-purple-400 border-gray-300 dark:border-gray-600 rounded focus:ring-purple-500 dark:focus:ring-purple-400"},null,8,H),[[o.lH,Qe.formData.allowed_warehouses]])]),(0,t.Lk)("div",N,[(0,t.Lk)("div",I,(0,s.v_)(e.name_ar),1),(0,t.Lk)("div",$,(0,s.v_)(e.description||e.name_en),1)])],2))),128))])])):(0,t.Q3)("",!0),Qe.formData.allowed_warehouses.length>0?((0,t.uX)(),(0,t.CE)("div",O,[(0,t.Lk)("div",q,[r[38]||(r[38]=(0,t.Lk)("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),(0,t.Lk)("span",J," تم اختيار "+(0,s.v_)(Qe.formData.allowed_warehouses.length)+" مخزن ",1)]),(0,t.Lk)("div",T,[r[39]||(r[39]=(0,t.Lk)("span",null,"المخازن المختارة:",-1)),(0,t.Lk)("span",G,(0,s.v_)(Qe.getSelectedWarehouseNames().join("، ")),1)])])):(0,t.Q3)("",!0)])),Qe.loadingWarehouses||0!==Qe.allWarehouses.length?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",Z,[r[41]||(r[41]=(0,t.Lk)("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),r[42]||(r[42]=(0,t.Lk)("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},"لا توجد مخازن",-1)),r[43]||(r[43]=(0,t.Lk)("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"ابدأ بإضافة مخازن جديدة للنظام.",-1)),(0,t.Lk)("div",Y,[(0,t.Lk)("button",{type:"button",onClick:r[9]||(r[9]=(...e)=>Qe.addNewWarehouse&&Qe.addNewWarehouse(...e)),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800"},[...r[40]||(r[40]=[(0,t.Lk)("svg",{class:"ml-2 -mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),(0,t.eW)(" إضافة مخزن جديد ",-1)])])])]))])):(0,t.Q3)("",!0),Qe.formData.role?((0,t.uX)(),(0,t.CE)("div",ee,[(0,t.Lk)("div",re,[r[45]||(r[45]=(0,t.Lk)("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," إدارة الصلاحيات ",-1)),(0,t.Lk)("button",{type:"button",onClick:r[10]||(r[10]=(...e)=>Qe.toggleAllPermissions&&Qe.toggleAllPermissions(...e)),class:"text-sm px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"},(0,s.v_)(Qe.allPermissionsSelected?"إلغاء الكل":"اختيار الكل"),1)]),(0,t.Lk)("div",ae,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Qe.permissionGroups,e=>((0,t.uX)(),(0,t.CE)("div",{key:e.category},[(0,t.Lk)("h4",te,(0,s.v_)(e.label),1),(0,t.Lk)("div",se,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.permissions,e=>((0,t.uX)(),(0,t.CE)("label",{key:e.value,class:(0,s.C4)(["flex items-center p-2 border rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",{"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20":Qe.formData.permissions.includes(e.value),"border-gray-200 dark:border-gray-700":!Qe.formData.permissions.includes(e.value)}])},[(0,t.bo)((0,t.Lk)("input",{type:"checkbox",value:e.value,"onUpdate:modelValue":r[11]||(r[11]=e=>Qe.formData.permissions=e),class:"h-4 w-4 text-blue-600 dark:text-blue-400 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400"},null,8,oe),[[o.lH,Qe.formData.permissions]]),(0,t.Lk)("div",le,[(0,t.Lk)("div",de,(0,s.v_)(e.name),1),(0,t.Lk)("div",ne,(0,s.v_)(e.description),1)])],2))),128))])]))),128))]),(0,t.Lk)("div",ie,[(0,t.Lk)("button",{type:"button",onClick:r[12]||(r[12]=e=>Qe.applyPermissionSet("view_only")),class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"}," صلاحيات مشاهدة فقط "),(0,t.Lk)("button",{type:"button",onClick:r[13]||(r[13]=e=>Qe.applyPermissionSet("basic_operations")),class:"px-3 py-1 text-sm border border-blue-300 dark:border-blue-600 text-blue-700 dark:text-blue-300 rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200"}," عمليات أساسية "),(0,t.Lk)("button",{type:"button",onClick:r[14]||(r[14]=e=>Qe.applyPermissionSet("full_access")),class:"px-3 py-1 text-sm border border-green-300 dark:border-green-600 text-green-700 dark:text-green-300 rounded-md hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors duration-200"}," صلاحيات كاملة "),(0,t.Lk)("button",{type:"button",onClick:r[15]||(r[15]=e=>Qe.applyPermissionSet("warehouse_manager")),class:"px-3 py-1 text-sm border border-purple-300 dark:border-purple-600 text-purple-700 dark:text-purple-300 rounded-md hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors duration-200"}," مدير مخازن نموذجي ")])])):(0,t.Q3)("",!0),a.user?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",ue,[(0,t.Lk)("div",ce,[r[46]||(r[46]=(0,t.Lk)("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[(0,t.eW)(" كلمة المرور "),(0,t.Lk)("span",{class:"text-red-500"},"*")],-1)),(0,t.Lk)("div",ge,[(0,t.Lk)("button",{type:"button",onClick:r[16]||(r[16]=(...e)=>Qe.togglePasswordVisibility&&Qe.togglePasswordVisibility(...e)),class:"text-sm px-2 py-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300"},(0,s.v_)(Qe.showPassword?"إخفاء":"إظهار"),1),(0,t.Lk)("button",{type:"button",onClick:r[17]||(r[17]=(...e)=>Qe.generateStrongPassword&&Qe.generateStrongPassword(...e)),class:"text-sm px-2 py-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"}," توليد قوي ")])]),(0,t.Lk)("div",me,[(0,t.bo)((0,t.Lk)("input",{type:Qe.showPassword?"text":"password",required:"","onUpdate:modelValue":r[18]||(r[18]=e=>Qe.formData.password=e),class:"flex-1 p-3 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"كلمة المرور المؤقتة"},null,8,pe),[[o.hp,Qe.formData.password]]),(0,t.Lk)("button",{type:"button",onClick:r[19]||(r[19]=(...e)=>Qe.generatePassword&&Qe.generatePassword(...e)),class:"px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200 text-sm font-medium"}," توليد عشوائي ")]),(0,t.Lk)("div",ke,[(0,t.Lk)("div",be,[r[47]||(r[47]=(0,t.Lk)("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"قوة كلمة المرور:",-1)),(0,t.Lk)("span",{class:(0,s.C4)(["text-xs font-medium",Qe.passwordStrength.color])},(0,s.v_)(Qe.passwordStrength.label),3)]),(0,t.Lk)("div",ve,[(0,t.Lk)("div",{class:(0,s.C4)(["h-full transition-all duration-300",Qe.passwordStrength.color]),style:(0,s.Tr)({width:Qe.passwordStrength.percentage+"%"})},null,6)])]),r[51]||(r[51]=(0,t.Lk)("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," يجب أن تكون كلمة المرور 8 أحرف على الأقل وتحتوي على حروف وأرقام ",-1)),Qe.formData.password?((0,t.uX)(),(0,t.CE)("div",he,[r[49]||(r[49]=(0,t.Lk)("div",{class:"flex items-center gap-2 mb-2"},[(0,t.Lk)("svg",{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),(0,t.Lk)("span",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-300"},"كلمة المرور المؤقتة")],-1)),(0,t.Lk)("div",ye,[(0,t.Lk)("code",xe,(0,s.v_)(Qe.formData.password),1),(0,t.Lk)("button",{type:"button",onClick:r[20]||(r[20]=(...e)=>Qe.copyPassword&&Qe.copyPassword(...e)),class:"p-2 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400",title:"نسخ"},[...r[48]||(r[48]=[(0,t.Lk)("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])]),r[50]||(r[50]=(0,t.Lk)("p",{class:"text-xs text-yellow-700 dark:text-yellow-400 mt-2"}," سيتم إرسال هذه الكلمة إلى المستخدم. يجب عليه تغييرها عند أول دخول. ",-1))])):(0,t.Q3)("",!0)])),Qe.formData.role?((0,t.uX)(),(0,t.CE)("div",we,[r[54]||(r[54]=(0,t.Lk)("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-3"},"ملخص المستخدم:",-1)),(0,t.Lk)("div",fe,[(0,t.Lk)("div",null,[r[52]||(r[52]=(0,t.Lk)("div",{class:"text-xs text-blue-600 dark:text-blue-400 mb-1"},"الدور والصلاحيات",-1)),(0,t.Lk)("div",Le,(0,s.v_)(Qe.getRoleDisplay(Qe.formData.role)),1),(0,t.Lk)("div",_e,(0,s.v_)(Qe.formData.permissions.length)+" صلاحية محددة ",1)]),(0,t.Lk)("div",null,[r[53]||(r[53]=(0,t.Lk)("div",{class:"text-xs text-blue-600 dark:text-blue-400 mb-1"},"الوصول إلى المخازن",-1)),(0,t.Lk)("div",Ce,(0,s.v_)(Qe.formData.allowed_warehouses.length)+" مخزن ",1),Qe.formData.allowed_warehouses.length>0?((0,t.uX)(),(0,t.CE)("div",We,[(0,t.eW)((0,s.v_)(Qe.getSelectedWarehouseNames().slice(0,2).join("، "))+" ",1),Qe.formData.allowed_warehouses.length>2?((0,t.uX)(),(0,t.CE)("span",Ee,"وآخرون")):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)])])])):(0,t.Q3)("",!0),Qe.validationErrors.length>0?((0,t.uX)(),(0,t.CE)("div",De,[r[55]||(r[55]=(0,t.Lk)("h4",{class:"text-sm font-medium text-red-800 dark:text-red-300 mb-2"},"خطأ في التحقق:",-1)),(0,t.Lk)("ul",Xe,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Qe.validationErrors,e=>((0,t.uX)(),(0,t.CE)("li",{key:e},(0,s.v_)(e),1))),128))])])):(0,t.Q3)("",!0),Qe.errorMessage?((0,t.uX)(),(0,t.CE)("div",Me,[(0,t.Lk)("div",Se,[r[56]||(r[56]=(0,t.Lk)("svg",{class:"w-5 h-5 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),(0,t.Lk)("p",Pe,(0,s.v_)(Qe.errorMessage),1)])])):(0,t.Q3)("",!0),(0,t.Lk)("div",je,[(0,t.Lk)("button",{type:"button",onClick:r[21]||(r[21]=r=>e.$emit("close")),class:"flex-1 py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 font-medium"}," إلغاء "),(0,t.Lk)("button",{type:"submit",disabled:Qe.loading||!Qe.isFormValid,class:"flex-1 py-3 px-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-md hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 font-medium flex items-center justify-center gap-2"},[Qe.loading?((0,t.uX)(),(0,t.CE)("svg",Ve,[...r[57]||(r[57]=[(0,t.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),(0,t.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):((0,t.uX)(),(0,t.CE)("svg",Ke,[...r[58]||(r[58]=[(0,t.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),(0,t.eW)(" "+(0,s.v_)(Qe.loading?"جاري الحفظ...":a.user?"تحديث المستخدم":"إضافة مستخدم"),1)],8,Ae)])],32)])])):(0,t.Q3)("",!0),Qe.showWarehouseModal?((0,t.uX)(),(0,t.Wv)(ze,{key:1,warehouse:Qe.editingWarehouse,onClose:Qe.closeWarehouseModal,onSave:Qe.handleWarehouseSave},null,8,["warehouse","onClose","onSave"])):(0,t.Q3)("",!0)],64)}var Be=a(953),Re=a(834),ze=a(3556),Fe=a(1032),Ue=a(2405),He=a(3727),Ne={name:"AddUserModal",components:{WarehouseModal:He.A},props:{isOpen:{type:Boolean,required:!0},user:{type:Object,default:null}},emits:["close","save","warehouse-updated"],setup(e,{emit:r}){const a=(0,Re.Pj)(),s=(0,Be.KR)(!1),o=(0,Be.KR)(!1),l=(0,Be.KR)(""),d=(0,Be.KR)([]),n=(0,Be.KR)(!1),i=(0,Be.KR)(!1),u=(0,Be.KR)(null),c=(0,Be.KR)({name:"",email:"",role:"company_manager",is_active:!0,phone:"",allowed_warehouses:[],permissions:[],password:""}),g=(0,Be.KR)([{value:"superadmin",name:"المشرف العام",description:"صلاحيات كاملة على النظام"},{value:"warehouse_manager",name:"مدير المخازن",description:"إدارة المخزون والحركات في المخازن المحددة"},{value:"company_manager",name:"مدير الشركة",description:"عرض التقارير والبيانات (قراءة فقط)"}]),m=(0,Be.KR)([{category:"inventory",label:"إدارة المخزون",permissions:[{value:"manage_inventory",name:"إدارة المخزون",description:"إضافة وتعديل المخزون"},{value:"create_transfers",name:"إنشاء التحويلات",description:"نقل المخزون بين المخازن"},{value:"dispatch_items",name:"صرف الأصناف",description:"صرف الأصناف للخارج"},{value:"update_items",name:"تحديث الأصناف",description:"تعديل بيانات الأصناف"},{value:"delete_items",name:"حذف الأصناف",description:"إزالة الأصناف من النظام"}]},{category:"reports",label:"التقارير والمتابعة",permissions:[{value:"view_reports",name:"عرض التقارير",description:"مشاهدة تقارير المخزون"},{value:"export_data",name:"تصدير البيانات",description:"تصدير البيانات إلى Excel"},{value:"view_analytics",name:"عرض التحليلات",description:"مشاهدة الإحصائيات والتحليلات"}]},{category:"system",label:"إدارة النظام",permissions:[{value:"manage_warehouses",name:"إدارة المخازن",description:"إضافة وتعديل المخازن"},{value:"manage_users",name:"إدارة المستخدمين",description:"إضافة وتعديل المستخدمين"},{value:"system_settings",name:"إعدادات النظام",description:"تعديل إعدادات النظام"}]},{category:"advanced",label:"صلاحيات متقدمة",permissions:[{value:"audit_logs",name:"سجلات المراجعة",description:"مشاهدة سجلات النظام"},{value:"backup_restore",name:"النسخ الاحتياطي",description:"النسخ والاستعادة"},{value:"full_access",name:"وصول كامل",description:"جميع الصلاحيات بدون قيود"}]}]),p=(0,t.EW)(()=>a.state.warehouses||[]),k=(0,t.EW)(()=>p.value.filter(e=>"primary"===e.type)),b=(0,t.EW)(()=>p.value.filter(e=>"dispatch"===e.type)),v=(0,t.EW)(()=>{const e=m.value.flatMap(e=>e.permissions.map(e=>e.value));return e.every(e=>c.value.permissions.includes(e))}),h=(0,t.EW)(()=>{const e=c.value.password||"";let r=0;e.length>=8&&(r+=1),/[A-Z]/.test(e)&&(r+=1),/[a-z]/.test(e)&&(r+=1),/\d/.test(e)&&(r+=1),/[^A-Za-z0-9]/.test(e)&&(r+=1);const a=r/5*100;return r<=1?{label:"ضعيفة",color:"bg-red-500",percentage:a}:r<=3?{label:"متوسطة",color:"bg-yellow-500",percentage:a}:{label:"قوية",color:"bg-green-500",percentage:a}}),y=(0,t.EW)(()=>(d.value=[],c.value.name.trim()||d.value.push("الاسم الكامل مطلوب"),c.value.email.trim()?x(c.value.email)||d.value.push("صيغة البريد الإلكتروني غير صحيحة"):d.value.push("البريد الإلكتروني مطلوب"),c.value.role||d.value.push("الدور مطلوب"),e.user||c.value.password?!e.user&&c.value.password.length<8&&d.value.push("كلمة المرور يجب أن تكون 8 أحرف على الأقل"):d.value.push("كلمة المرور مطلوبة"),"warehouse_manager"===c.value.role&&0===c.value.allowed_warehouses.length&&d.value.push("يجب اختيار مخزن واحد على الأقل لمدير المخازن"),c.value.phone&&!w(c.value.phone)&&d.value.push("رقم الهاتف غير صحيح"),"warehouse_manager"===c.value.role&&0===c.value.permissions.length&&d.value.push("يجب تحديد صلاحيات على الأقل لمدير المخازن"),0===d.value.length)),x=e=>{const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return r.test(e)},w=e=>{const r=/^01[0-9]{9}$/;return r.test(e)},f=e=>{const r={superadmin:"المشرف العام",warehouse_manager:"مدير المخازن",company_manager:"مدير الشركة"};return r[e]||e},L=()=>c.value.allowed_warehouses.map(e=>{const r=p.value.find(r=>r.id===e);return r?r.name_ar:e}),_=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let a=0;a<10;a++)r+=e.charAt(Math.floor(Math.random()*e.length));c.value.password=r},C=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="abcdefghijklmnopqrstuvwxyz",a="0123456789",t="!@#$%^&*";let s="";s+=e.charAt(Math.floor(Math.random()*e.length)),s+=r.charAt(Math.floor(Math.random()*r.length)),s+=a.charAt(Math.floor(Math.random()*a.length)),s+=t.charAt(Math.floor(Math.random()*t.length));const o=e+r+a+t;for(let l=4;l<12;l++)s+=o.charAt(Math.floor(Math.random()*o.length));c.value.password=s.split("").sort(()=>Math.random()-.5).join("")},W=()=>{n.value=!n.value},E=async()=>{try{await navigator.clipboard.writeText(c.value.password),a.dispatch("showNotification",{type:"success",message:"تم نسخ كلمة المرور"})}catch(e){console.error("Failed to copy password:",e)}},D=()=>{c.value.allowed_warehouses.length===p.value.length?c.value.allowed_warehouses=[]:c.value.allowed_warehouses=p.value.map(e=>e.id)},X=()=>{if(v.value)c.value.permissions=[];else{const e=m.value.flatMap(e=>e.permissions.map(e=>e.value));c.value.permissions=[...e]}},M=e=>{const r={view_only:["view_reports","export_data"],basic_operations:["manage_inventory","create_transfers","dispatch_items","view_reports"],full_access:["full_access"],warehouse_manager:["manage_inventory","create_transfers","dispatch_items","update_items","view_reports","export_data"]};c.value.permissions=r[e]||[]},S=()=>{r("warehouse-updated"),a.dispatch("showNotification",{type:"info",message:"يمكنك إدارة المخازن من قائمة المخازن في الشريط الجانبي"})},P=()=>{u.value=null,i.value=!0},j=e=>{u.value=e,i.value=!0},A=()=>{i.value=!1,u.value=null},V=async e=>{try{if(await a.dispatch("loadWarehouses"),c.value.allowed_warehouses.includes(e.id)){const r=c.value.allowed_warehouses.indexOf(e.id);r>-1&&(c.value.allowed_warehouses[r]=e.id)}A()}catch(r){console.error("Error handling warehouse save:",r)}},K=()=>{c.value={name:"",email:"",role:"company_manager",is_active:!0,phone:"",allowed_warehouses:[],permissions:[],password:""},l.value="",d.value=[],n.value=!1},Q=async()=>{if(0===p.value.length){o.value=!0;try{await a.dispatch("loadWarehouses")}catch(e){console.error("Error loading warehouses:",e),l.value="خطأ في تحميل المخازن"}finally{o.value=!1}}},B=async()=>{if(y.value){s.value=!0,l.value="",d.value=[];try{console.log("Starting user submission process...");const t=a.state.user?.uid;if(!t)throw new Error("يجب تسجيل الدخول أولاً");const s={name:c.value.name.trim(),email:c.value.email.trim().toLowerCase(),role:c.value.role,is_active:!1!==c.value.is_active,phone:c.value.phone.trim()||null,allowed_warehouses:"warehouse_manager"===c.value.role?c.value.allowed_warehouses:[],permissions:Array.isArray(c.value.permissions)?c.value.permissions:[],profile_complete:!0,email_verified:!1,created_by:t,created_at:new Date,updated_at:new Date,last_login:null};let o;if(console.log("Prepared user data for Firestore:",s),e.user){if(console.log("Updating existing user:",e.user.id),delete s.created_at,delete s.created_by,delete s.profile_complete,delete s.email_verified,s.updated_at=new Date,o=await a.dispatch("updateUser",{userId:e.user.id,userData:s}),!o.success)throw new Error(o.error||"فشل في تحديث المستخدم");a.dispatch("showNotification",{type:"success",message:"تم تحديث المستخدم بنجاح"})}else{if(console.log("Creating new user..."),!c.value.password)throw new Error("كلمة المرور مطلوبة");if(c.value.password.length<8)throw new Error("كلمة المرور يجب أن تكون 8 أحرف على الأقل");const e=await(0,Fe.eJ)(ze.j2,s.email,c.value.password);s.id=e.uid,console.log("Firebase Auth user created:",e.uid),console.log("Saving to Firestore:",s),await(0,Ue.BN)((0,Ue.H9)(ze.db,"users",e.uid),s);const r={...s,temporary_password:c.value.password};a.dispatch("showNotification",{type:"success",message:`تم إضافة المستخدم "${s.name}" بنجاح`}),o={success:!0,data:r}}if(!o||!o.success)throw new Error("فشل في عملية الحفظ");r("save",o.data||s),setTimeout(()=>{r("close")},500)}catch(t){console.error("Error in form submission:",t),console.error("Error details:",t.message,t.code);let e=t.message||"حدث خطأ أثناء حفظ المستخدم";t.message.includes("الاسم يجب أن يكون على الأقل حرفين")?e="الاسم يجب أن يكون على الأقل حرفين":t.message.includes("البريد الإلكتروني غير صالح")?e="صيغة البريد الإلكتروني غير صحيحة":"auth/email-already-in-use"===t.code||t.message.includes("البريد الإلكتروني مستخدم بالفعل")?e="البريد الإلكتروني مستخدم بالفعل":"auth/invalid-email"===t.code?e="صيغة البريد الإلكتروني غير صحيحة":"auth/weak-password"===t.code||t.message.includes("كلمة المرور يجب أن تكون 8 أحرف على الأقل")?e="كلمة المرور يجب أن تكون 8 أحرف على الأقل":t.message.includes("يجب اختيار مخزن واحد على الأقل لمدير المخازن")?e="يجب اختيار مخزن واحد على الأقل لمدير المخازن":t.message.includes("يجب تسجيل الدخول أولاً")?e="يجب تسجيل الدخول أولاً":"permission-denied"===t.code?e="ليس لديك صلاحية لإجراء هذا الإجراء":"invalid-argument"===t.code?e="بيانات غير صالحة. يرجى التحقق من الحقول":"firestore/permission-denied"===t.code?e="ليس لديك صلاحية لإجراء هذا الإجراء. تأكد من أنك سوبر أدمن":t.message.includes("profile_complete")&&(e="بيانات المستخدم غير مكتملة. يرجى التحقق من الحقول المطلوبة"),l.value=e,d.value=[e],a.dispatch("showNotification",{type:"error",message:e})}finally{s.value=!1}}};return(0,t.wB)(()=>e.isOpen,async r=>{r&&(K(),e.user||(C(),M("warehouse_manager")),await Q(),e.user&&(c.value={name:e.user.name||"",email:e.user.email||"",role:e.user.role||"company_manager",is_active:!1!==e.user.is_active,phone:e.user.phone||"",allowed_warehouses:e.user.allowed_warehouses||[],permissions:e.user.permissions||[]},delete c.value.password))}),(0,t.wB)(()=>c.value.role,e=>{"warehouse_manager"!==e&&(c.value.allowed_warehouses=[]),"company_manager"===e?M("view_only"):"warehouse_manager"===e?M("warehouse_manager"):"superadmin"===e&&M("full_access")}),(0,t.sV)(async()=>{await Q()}),{loading:s,loadingWarehouses:o,errorMessage:l,validationErrors:d,showPassword:n,showWarehouseModal:i,editingWarehouse:u,formData:c,availableRoles:g,permissionGroups:m,allWarehouses:p,primaryWarehouses:k,dispatchWarehouses:b,allPermissionsSelected:v,passwordStrength:h,isFormValid:y,getRoleDisplay:f,getSelectedWarehouseNames:L,generatePassword:_,generateStrongPassword:C,togglePasswordVisibility:W,copyPassword:E,toggleAllWarehouses:D,toggleAllPermissions:X,applyPermissionSet:M,manageWarehouses:S,addNewWarehouse:P,editWarehouse:j,closeWarehouseModal:A,handleWarehouseSave:V,handleSubmit:B}}},Ie=a(6262);const $e=(0,Ie.A)(Ne,[["render",Qe]]);var Oe=$e}}]);