"use strict";(self["webpackChunkmonofia_perfume_inventory"]=self["webpackChunkmonofia_perfume_inventory"]||[]).push([[76],{7802:function(e,o,t){t.r(o),t.d(o,{default:function(){return D}});var r=t(641),a=t(3751),i=t(33);const l={class:"fixed inset-0 z-10 overflow-y-auto"},n={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},s={class:"bg-white px-6 py-4 border-b border-gray-200"},d={class:"flex items-center justify-between"},c={class:"space-y-4"},u=["value"],m={class:"mt-6 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 sm:space-x-reverse gap-3"},f=["disabled"],p={key:0};function g(e,o,t,g,b,y){const k=(0,r.g2)("TransitionChild"),x=(0,r.g2)("DialogTitle"),h=(0,r.g2)("XIcon"),w=(0,r.g2)("DialogPanel"),v=(0,r.g2)("Dialog"),L=(0,r.g2)("TransitionRoot");return(0,r.uX)(),(0,r.Wv)(L,{as:"template",show:t.isOpen},{default:(0,r.k6)(()=>[(0,r.bF)(v,{as:"div",class:"relative z-50",onClose:g.closeModal},{default:(0,r.k6)(()=>[(0,r.bF)(k,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,r.k6)(()=>[...o[10]||(o[10]=[(0,r.Lk)("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),(0,r.Lk)("div",l,[(0,r.Lk)("div",n,[(0,r.bF)(k,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:(0,r.k6)(()=>[(0,r.bF)(w,{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:(0,r.k6)(()=>[(0,r.Lk)("div",s,[(0,r.Lk)("div",d,[(0,r.bF)(x,{class:"text-lg font-semibold text-gray-900"},{default:(0,r.k6)(()=>[...o[11]||(o[11]=[(0,r.eW)("تعديل الصنف",-1)])]),_:1}),(0,r.Lk)("button",{type:"button",class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500",onClick:o[0]||(o[0]=(...e)=>g.closeModal&&g.closeModal(...e))},[o[12]||(o[12]=(0,r.Lk)("span",{class:"sr-only"},"إغلاق",-1)),(0,r.bF)(h,{class:"h-6 w-6"})])])]),(0,r.Lk)("form",{onSubmit:o[9]||(o[9]=(0,a.D$)((...e)=>g.handleSubmit&&g.handleSubmit(...e),["prevent"])),class:"bg-white px-6 py-4"},[(0,r.Lk)("div",c,[(0,r.Lk)("div",null,[o[13]||(o[13]=(0,r.Lk)("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"},"اسم الصنف",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":o[1]||(o[1]=e=>g.formData.name=e),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل اسم الصنف"},null,512),[[a.Jo,g.formData.name]])]),(0,r.Lk)("div",null,[o[14]||(o[14]=(0,r.Lk)("label",{for:"code",class:"block text-sm font-medium text-gray-700 mb-1"},"الكود",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"code","onUpdate:modelValue":o[2]||(o[2]=e=>g.formData.code=e),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل كود الصنف"},null,512),[[a.Jo,g.formData.code]])]),(0,r.Lk)("div",null,[o[15]||(o[15]=(0,r.Lk)("label",{for:"color",class:"block text-sm font-medium text-gray-700 mb-1"},"اللون",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"color","onUpdate:modelValue":o[3]||(o[3]=e=>g.formData.color=e),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل اللون"},null,512),[[a.Jo,g.formData.color]])]),(0,r.Lk)("div",null,[o[16]||(o[16]=(0,r.Lk)("label",{for:"quantity",class:"block text-sm font-medium text-gray-700 mb-1"},"الكمية",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"quantity","onUpdate:modelValue":o[4]||(o[4]=e=>g.formData.quantity=e),required:"",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل الكمية"},null,512),[[a.Jo,g.formData.quantity]])]),(0,r.Lk)("div",null,[o[17]||(o[17]=(0,r.Lk)("label",{for:"price",class:"block text-sm font-medium text-gray-700 mb-1"},"السعر",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"price","onUpdate:modelValue":o[5]||(o[5]=e=>g.formData.price=e),required:"",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل السعر"},null,512),[[a.Jo,g.formData.price]])]),(0,r.Lk)("div",null,[o[19]||(o[19]=(0,r.Lk)("label",{for:"warehouse",class:"block text-sm font-medium text-gray-700 mb-1"},"المخزن",-1)),(0,r.bo)((0,r.Lk)("select",{id:"warehouse","onUpdate:modelValue":o[6]||(o[6]=e=>g.formData.warehouse_id=e),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[o[18]||(o[18]=(0,r.Lk)("option",{value:""},"اختر المخزن",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(g.warehouses,e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,i.v_)(e.name_ar),9,u))),128))],512),[[a.u1,g.formData.warehouse_id]])]),(0,r.Lk)("div",null,[o[20]||(o[20]=(0,r.Lk)("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"},"الوصف",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"description","onUpdate:modelValue":o[7]||(o[7]=e=>g.formData.description=e),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"أدخل وصف الصنف"},null,512),[[a.Jo,g.formData.description]])])]),(0,r.Lk)("div",m,[(0,r.Lk)("button",{type:"button",onClick:o[8]||(o[8]=(...e)=>g.closeModal&&g.closeModal(...e)),class:"w-full sm:w-auto px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200"}," إلغاء "),(0,r.Lk)("button",{type:"submit",disabled:g.loading,class:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center"},[g.loading?((0,r.uX)(),(0,r.CE)("span",p,[...o[21]||(o[21]=[(0,r.Lk)("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,r.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,r.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(0,r.Q3)("",!0),o[22]||(o[22]=(0,r.eW)(" حفظ التغييرات ",-1))],8,f)])],32)]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])}var b=t(953),y=t(7770),k=t(4232),x=t(8353),h=t(834),w={name:"EditItemModal",components:{Dialog:y.lG,DialogPanel:y.Lj,DialogTitle:y.L3,TransitionChild:k._,TransitionRoot:k.O,XIcon:x.A},props:{isOpen:{type:Boolean,required:!0},item:{type:Object,default:null}},emits:["close","success"],setup(e,{emit:o}){const t=(0,h.Pj)(),a=(0,b.KR)(!1),i=(0,b.Kh)({name:"",code:"",color:"",quantity:0,price:0,warehouse_id:"",description:""}),l=(0,b.KR)([]);(0,r.wB)(()=>e.item,e=>{e&&Object.assign(i,{name:e.name||"",code:e.code||"",color:e.color||"",quantity:e.quantity||0,price:e.price||0,warehouse_id:e.warehouse_id||"",description:e.description||""})},{immediate:!0});const n=async()=>{try{l.value=await t.dispatch("fetchWarehouses")}catch(e){console.error("Error fetching warehouses:",e)}};n();const s=()=>{o("close")},d=async()=>{if(!a.value){a.value=!0;try{await t.dispatch("updateInventoryItem",{id:e.item.id,...i}),o("success"),s()}catch(r){console.error("Error updating item:",r)}finally{a.value=!1}}};return{formData:i,loading:a,warehouses:l,closeModal:s,handleSubmit:d}}},v=t(6262);const L=(0,v.A)(w,[["render",g]]);var D=L}}]);